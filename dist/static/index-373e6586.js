import{r as O,c$ as Wi,a as Fi,d0 as Ni}from"./sanity-51ee0675.js";import{E as g,V as Z,W as we,l as ee,r as d,X as nt,Y as $i,Z as qi,_ as bn,$ as Sn,a0 as We,a1 as kt,a2 as je,S as k,a3 as le,b as te,e as ct,a4 as Ct,a5 as kn,a6 as ft,a7 as Cn,a8 as he,a9 as vt,m as b,aa as P,ab as K,ac as M,ad as At,ae as Se,u as Mt,af as wt,ag as ke,ah as Ui,ai as Hi,aj as ht,ak as Vi,al as qt,v as Ke,am as vn,an as ut,ao as zi,ap as An,aq as ji,ar as Ki,o as Gi,K as Ji,M as Qi,as as _i,R as Xi,at as Yi,O as Zi,k as Mn,U as eo,Q as to,au as no,av as io,J as oo,H as ro,t as m,aw as so}from"./index-aa2640dd.js";const lo=t=>{let{state:e}=t,n=e.doc.lineAt(e.selection.main.from),i=Dt(t.state,n.from);return i.line?ao(t):i.block?fo(t):!1};function Lt(t,e){return({state:n,dispatch:i})=>{if(n.readOnly)return!1;let o=t(e,n);return o?(i(n.update(o)),!0):!1}}const ao=Lt(mo,0),co=Lt(wn,0),fo=Lt((t,e)=>wn(t,e,uo(e)),0);function Dt(t,e){let n=t.languageDataAt("commentTokens",e);return n.length?n[0]:{}}const be=50;function ho(t,{open:e,close:n},i,o){let r=t.sliceDoc(i-be,i),s=t.sliceDoc(o,o+be),l=/\s*$/.exec(r)[0].length,a=/^\s*/.exec(s)[0].length,c=r.length-l;if(r.slice(c-e.length,c)==e&&s.slice(a,a+n.length)==n)return{open:{pos:i-l,margin:l&&1},close:{pos:o+a,margin:a&&1}};let f,h;o-i<=2*be?f=h=t.sliceDoc(i,o):(f=t.sliceDoc(i,i+be),h=t.sliceDoc(o-be,o));let u=/^\s*/.exec(f)[0].length,p=/\s*$/.exec(h)[0].length,x=h.length-p-n.length;return f.slice(u,u+e.length)==e&&h.slice(x,x+n.length)==n?{open:{pos:i+u+e.length,margin:/\s/.test(f.charAt(u+e.length))?1:0},close:{pos:o-p-n.length,margin:/\s/.test(h.charAt(x-1))?1:0}}:null}function uo(t){let e=[];for(let n of t.selection.ranges){let i=t.doc.lineAt(n.from),o=n.to<=i.to?i:t.doc.lineAt(n.to),r=e.length-1;r>=0&&e[r].to>i.from?e[r].to=o.to:e.push({from:i.from+/^\s*/.exec(i.text)[0].length,to:o.to})}return e}function wn(t,e,n=e.selection.ranges){let i=n.map(r=>Dt(e,r.from).block);if(!i.every(r=>r))return null;let o=n.map((r,s)=>ho(e,i[s],r.from,r.to));if(t!=2&&!o.every(r=>r))return{changes:e.changes(n.map((r,s)=>o[s]?[]:[{from:r.from,insert:i[s].open+" "},{from:r.to,insert:" "+i[s].close}]))};if(t!=1&&o.some(r=>r)){let r=[];for(let s=0,l;s<o.length;s++)if(l=o[s]){let a=i[s],{open:c,close:f}=l;r.push({from:c.pos-a.open.length,to:c.pos+c.margin},{from:f.pos-f.margin,to:f.pos+a.close.length})}return{changes:r}}return null}function mo(t,e,n=e.selection.ranges){let i=[],o=-1;for(let{from:r,to:s}of n){let l=i.length,a=1e9,c=Dt(e,r).line;if(c){for(let f=r;f<=s;){let h=e.doc.lineAt(f);if(h.from>o&&(r==s||s>h.from)){o=h.from;let u=/^\s*/.exec(h.text)[0].length,p=u==h.length,x=h.text.slice(u,u+c.length)==c?u:-1;u<h.text.length&&u<a&&(a=u),i.push({line:h,comment:x,token:c,indent:u,empty:p,single:!1})}f=h.to+1}if(a<1e9)for(let f=l;f<i.length;f++)i[f].indent<i[f].line.text.length&&(i[f].indent=a);i.length==l+1&&(i[l].single=!0)}}if(t!=2&&i.some(r=>r.comment<0&&(!r.empty||r.single))){let r=[];for(let{line:l,token:a,indent:c,empty:f,single:h}of i)(h||!f)&&r.push({from:l.from+c,insert:a+" "});let s=e.changes(r);return{changes:s,selection:e.selection.map(s,1)}}else if(t!=1&&i.some(r=>r.comment>=0)){let r=[];for(let{line:s,comment:l,token:a}of i)if(l>=0){let c=s.from+l,f=c+a.length;s.text[f-s.from]==" "&&f++,r.push({from:c,to:f})}return{changes:r}}return null}const dt=je.define(),po=je.define(),go=Z.define(),Ln=Z.define({combine(t){return we(t,{minDepth:100,newGroupDelay:500,joinToEvent:(e,n)=>n},{minDepth:Math.max,newGroupDelay:Math.min,joinToEvent:(e,n)=>(i,o)=>e(i,o)||n(i,o)})}});function yo(t){let e=0;return t.iterChangedRanges((n,i)=>e=i),e}const Dn=ee.define({create(){return V.empty},update(t,e){let n=e.state.facet(Ln),i=e.annotation(dt);if(i){let a=e.docChanged?d.single(yo(e.changes)):void 0,c=D.fromTransaction(e,a),f=i.side,h=f==0?t.undone:t.done;return c?h=Fe(h,h.length,n.minDepth,c):h=In(h,e.startState.selection),new V(f==0?i.rest:h,f==0?h:i.rest)}let o=e.annotation(po);if((o=="full"||o=="before")&&(t=t.isolate()),e.annotation(nt.addToHistory)===!1)return e.changes.empty?t:t.addMapping(e.changes.desc);let r=D.fromTransaction(e),s=e.annotation(nt.time),l=e.annotation(nt.userEvent);return r?t=t.addChanges(r,s,l,n,e):e.selection&&(t=t.addSelection(e.startState.selection,s,l,n.newGroupDelay)),(o=="full"||o=="after")&&(t=t.isolate()),t},toJSON(t){return{done:t.done.map(e=>e.toJSON()),undone:t.undone.map(e=>e.toJSON())}},fromJSON(t){return new V(t.done.map(D.fromJSON),t.undone.map(D.fromJSON))}});function xo(t={}){return[Dn,Ln.of(t),g.domEventHandlers({beforeinput(e,n){let i=e.inputType=="historyUndo"?Bn:e.inputType=="historyRedo"?mt:null;return i?(e.preventDefault(),i(n)):!1}})]}function Ge(t,e){return function({state:n,dispatch:i}){if(!e&&n.readOnly)return!1;let o=n.field(Dn,!1);if(!o)return!1;let r=o.pop(t,n,e);return r?(i(r),!0):!1}}const Bn=Ge(0,!1),mt=Ge(1,!1),bo=Ge(0,!0),So=Ge(1,!0);class D{constructor(e,n,i,o,r){this.changes=e,this.effects=n,this.mapped=i,this.startSelection=o,this.selectionsAfter=r}setSelAfter(e){return new D(this.changes,this.effects,this.mapped,this.startSelection,e)}toJSON(){var e,n,i;return{changes:(e=this.changes)===null||e===void 0?void 0:e.toJSON(),mapped:(n=this.mapped)===null||n===void 0?void 0:n.toJSON(),startSelection:(i=this.startSelection)===null||i===void 0?void 0:i.toJSON(),selectionsAfter:this.selectionsAfter.map(o=>o.toJSON())}}static fromJSON(e){return new D(e.changes&&$i.fromJSON(e.changes),[],e.mapped&&qi.fromJSON(e.mapped),e.startSelection&&d.fromJSON(e.startSelection),e.selectionsAfter.map(d.fromJSON))}static fromTransaction(e,n){let i=W;for(let o of e.startState.facet(go)){let r=o(e);r.length&&(i=i.concat(r))}return!i.length&&e.changes.empty?null:new D(e.changes.invert(e.startState.doc),i,void 0,n||e.startState.selection,W)}static selection(e){return new D(void 0,W,void 0,void 0,e)}}function Fe(t,e,n,i){let o=e+1>n+20?e-n-1:0,r=t.slice(o,e);return r.push(i),r}function ko(t,e){let n=[],i=!1;return t.iterChangedRanges((o,r)=>n.push(o,r)),e.iterChangedRanges((o,r,s,l)=>{for(let a=0;a<n.length;){let c=n[a++],f=n[a++];l>=c&&s<=f&&(i=!0)}}),i}function Co(t,e){return t.ranges.length==e.ranges.length&&t.ranges.filter((n,i)=>n.empty!=e.ranges[i].empty).length===0}function En(t,e){return t.length?e.length?t.concat(e):t:e}const W=[],vo=200;function In(t,e){if(t.length){let n=t[t.length-1],i=n.selectionsAfter.slice(Math.max(0,n.selectionsAfter.length-vo));return i.length&&i[i.length-1].eq(e)?t:(i.push(e),Fe(t,t.length-1,1e9,n.setSelAfter(i)))}else return[D.selection([e])]}function Ao(t){let e=t[t.length-1],n=t.slice();return n[t.length-1]=e.setSelAfter(e.selectionsAfter.slice(0,e.selectionsAfter.length-1)),n}function it(t,e){if(!t.length)return t;let n=t.length,i=W;for(;n;){let o=Mo(t[n-1],e,i);if(o.changes&&!o.changes.empty||o.effects.length){let r=t.slice(0,n);return r[n-1]=o,r}else e=o.mapped,n--,i=o.selectionsAfter}return i.length?[D.selection(i)]:W}function Mo(t,e,n){let i=En(t.selectionsAfter.length?t.selectionsAfter.map(l=>l.map(e)):W,n);if(!t.changes)return D.selection(i);let o=t.changes.map(e),r=e.mapDesc(t.changes,!0),s=t.mapped?t.mapped.composeDesc(r):r;return new D(o,k.mapEffects(t.effects,e),s,t.startSelection.map(r),i)}const wo=/^(input\.type|delete)($|\.)/;class V{constructor(e,n,i=0,o=void 0){this.done=e,this.undone=n,this.prevTime=i,this.prevUserEvent=o}isolate(){return this.prevTime?new V(this.done,this.undone):this}addChanges(e,n,i,o,r){let s=this.done,l=s[s.length-1];return l&&l.changes&&!l.changes.empty&&e.changes&&(!i||wo.test(i))&&(!l.selectionsAfter.length&&n-this.prevTime<o.newGroupDelay&&o.joinToEvent(r,ko(l.changes,e.changes))||i=="input.type.compose")?s=Fe(s,s.length-1,o.minDepth,new D(e.changes.compose(l.changes),En(e.effects,l.effects),l.mapped,l.startSelection,W)):s=Fe(s,s.length,o.minDepth,e),new V(s,W,n,i)}addSelection(e,n,i,o){let r=this.done.length?this.done[this.done.length-1].selectionsAfter:W;return r.length>0&&n-this.prevTime<o&&i==this.prevUserEvent&&i&&/^select($|\.)/.test(i)&&Co(r[r.length-1],e)?this:new V(In(this.done,e),this.undone,n,i)}addMapping(e){return new V(it(this.done,e),it(this.undone,e),this.prevTime,this.prevUserEvent)}pop(e,n,i){let o=e==0?this.done:this.undone;if(o.length==0)return null;let r=o[o.length-1];if(i&&r.selectionsAfter.length)return n.update({selection:r.selectionsAfter[r.selectionsAfter.length-1],annotations:dt.of({side:e,rest:Ao(o)}),userEvent:e==0?"select.undo":"select.redo",scrollIntoView:!0});if(r.changes){let s=o.length==1?W:o.slice(0,o.length-1);return r.mapped&&(s=it(s,r.mapped)),n.update({changes:r.changes,selection:r.startSelection,effects:r.effects,annotations:dt.of({side:e,rest:s}),filter:!1,userEvent:e==0?"undo":"redo",scrollIntoView:!0})}else return null}}V.empty=new V(W,W);const Lo=[{key:"Mod-z",run:Bn,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:mt,preventDefault:!0},{linux:"Ctrl-Shift-z",run:mt,preventDefault:!0},{key:"Mod-u",run:bo,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:So,preventDefault:!0}];function me(t,e){return d.create(t.ranges.map(e),t.mainIndex)}function z(t,e){return t.update({selection:e,scrollIntoView:!0,userEvent:"select"})}function q({state:t,dispatch:e},n){let i=me(t.selection,n);return i.eq(t.selection)?!1:(e(z(t,i)),!0)}function Je(t,e){return d.cursor(e?t.to:t.from)}function Tn(t,e){return q(t,n=>n.empty?t.moveByChar(n,e):Je(n,e))}function A(t){return t.textDirectionAt(t.state.selection.main.head)==Cn.LTR}const Rn=t=>Tn(t,!A(t)),On=t=>Tn(t,A(t));function Pn(t,e){return q(t,n=>n.empty?t.moveByGroup(n,e):Je(n,e))}const Do=t=>Pn(t,!A(t)),Bo=t=>Pn(t,A(t));function Eo(t,e,n){if(e.type.prop(n))return!0;let i=e.to-e.from;return i&&(i>2||/[^\s,.;:]/.test(t.sliceDoc(e.from,e.to)))||e.firstChild}function Qe(t,e,n){let i=te(t).resolveInner(e.head),o=n?ct.closedBy:ct.openedBy;for(let a=e.head;;){let c=n?i.childAfter(a):i.childBefore(a);if(!c)break;Eo(t,c,o)?i=c:a=n?c.to:c.from}let r=i.type.prop(o),s,l;return r&&(s=n?le(t,i.from,1):le(t,i.to,-1))&&s.matched?l=n?s.end.to:s.end.from:l=n?i.to:i.from,d.cursor(l,n?-1:1)}const Io=t=>q(t,e=>Qe(t.state,e,!A(t))),To=t=>q(t,e=>Qe(t.state,e,A(t)));function Wn(t,e){return q(t,n=>{if(!n.empty)return Je(n,e);let i=t.moveVertically(n,e);return i.head!=n.head?i:t.moveToLineBoundary(n,e)})}const Fn=t=>Wn(t,!1),Nn=t=>Wn(t,!0);function $n(t){let e=t.scrollDOM.clientHeight<t.scrollDOM.scrollHeight-2,n=0,i=0,o;if(e){for(let r of t.state.facet(g.scrollMargins)){let s=r(t);s!=null&&s.top&&(n=Math.max(s==null?void 0:s.top,n)),s!=null&&s.bottom&&(i=Math.max(s==null?void 0:s.bottom,i))}o=t.scrollDOM.clientHeight-n-i}else o=(t.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:n,marginBottom:i,selfScroll:e,height:Math.max(t.defaultLineHeight,o-5)}}function qn(t,e){let n=$n(t),{state:i}=t,o=me(i.selection,s=>s.empty?t.moveVertically(s,e,n.height):Je(s,e));if(o.eq(i.selection))return!1;let r;if(n.selfScroll){let s=t.coordsAtPos(i.selection.main.head),l=t.scrollDOM.getBoundingClientRect(),a=l.top+n.marginTop,c=l.bottom-n.marginBottom;s&&s.top>a&&s.bottom<c&&(r=g.scrollIntoView(o.main.head,{y:"start",yMargin:s.top-a}))}return t.dispatch(z(i,o),{effects:r}),!0}const Ut=t=>qn(t,!1),pt=t=>qn(t,!0);function _(t,e,n){let i=t.lineBlockAt(e.head),o=t.moveToLineBoundary(e,n);if(o.head==e.head&&o.head!=(n?i.to:i.from)&&(o=t.moveToLineBoundary(e,n,!1)),!n&&o.head==i.from&&i.length){let r=/^\s*/.exec(t.state.sliceDoc(i.from,Math.min(i.from+100,i.to)))[0].length;r&&e.head!=i.from+r&&(o=d.cursor(i.from+r))}return o}const Ro=t=>q(t,e=>_(t,e,!0)),Oo=t=>q(t,e=>_(t,e,!1)),Po=t=>q(t,e=>_(t,e,!A(t))),Wo=t=>q(t,e=>_(t,e,A(t))),Fo=t=>q(t,e=>d.cursor(t.lineBlockAt(e.head).from,1)),No=t=>q(t,e=>d.cursor(t.lineBlockAt(e.head).to,-1));function $o(t,e,n){let i=!1,o=me(t.selection,r=>{let s=le(t,r.head,-1)||le(t,r.head,1)||r.head>0&&le(t,r.head-1,1)||r.head<t.doc.length&&le(t,r.head+1,-1);if(!s||!s.end)return r;i=!0;let l=s.start.from==r.head?s.end.to:s.end.from;return n?d.range(r.anchor,l):d.cursor(l)});return i?(e(z(t,o)),!0):!1}const qo=({state:t,dispatch:e})=>$o(t,e,!1);function F(t,e){let n=me(t.state.selection,i=>{let o=e(i);return d.range(i.anchor,o.head,o.goalColumn,o.bidiLevel||void 0)});return n.eq(t.state.selection)?!1:(t.dispatch(z(t.state,n)),!0)}function Un(t,e){return F(t,n=>t.moveByChar(n,e))}const Hn=t=>Un(t,!A(t)),Vn=t=>Un(t,A(t));function zn(t,e){return F(t,n=>t.moveByGroup(n,e))}const Uo=t=>zn(t,!A(t)),Ho=t=>zn(t,A(t)),Vo=t=>F(t,e=>Qe(t.state,e,!A(t))),zo=t=>F(t,e=>Qe(t.state,e,A(t)));function jn(t,e){return F(t,n=>t.moveVertically(n,e))}const Kn=t=>jn(t,!1),Gn=t=>jn(t,!0);function Jn(t,e){return F(t,n=>t.moveVertically(n,e,$n(t).height))}const Ht=t=>Jn(t,!1),Vt=t=>Jn(t,!0),jo=t=>F(t,e=>_(t,e,!0)),Ko=t=>F(t,e=>_(t,e,!1)),Go=t=>F(t,e=>_(t,e,!A(t))),Jo=t=>F(t,e=>_(t,e,A(t))),Qo=t=>F(t,e=>d.cursor(t.lineBlockAt(e.head).from)),_o=t=>F(t,e=>d.cursor(t.lineBlockAt(e.head).to)),zt=({state:t,dispatch:e})=>(e(z(t,{anchor:0})),!0),jt=({state:t,dispatch:e})=>(e(z(t,{anchor:t.doc.length})),!0),Kt=({state:t,dispatch:e})=>(e(z(t,{anchor:t.selection.main.anchor,head:0})),!0),Gt=({state:t,dispatch:e})=>(e(z(t,{anchor:t.selection.main.anchor,head:t.doc.length})),!0),Xo=({state:t,dispatch:e})=>(e(t.update({selection:{anchor:0,head:t.doc.length},userEvent:"select"})),!0),Yo=({state:t,dispatch:e})=>{let n=Xe(t).map(({from:i,to:o})=>d.range(i,Math.min(o+1,t.doc.length)));return e(t.update({selection:d.create(n),userEvent:"select"})),!0},Zo=({state:t,dispatch:e})=>{let n=me(t.selection,i=>{var o;let r=te(t).resolveInner(i.head,1);for(;!(r.from<i.from&&r.to>=i.to||r.to>i.to&&r.from<=i.from||!(!((o=r.parent)===null||o===void 0)&&o.parent));)r=r.parent;return d.range(r.to,r.from)});return e(z(t,n)),!0},er=({state:t,dispatch:e})=>{let n=t.selection,i=null;return n.ranges.length>1?i=d.create([n.main]):n.main.empty||(i=d.create([d.cursor(n.main.head)])),i?(e(z(t,i)),!0):!1};function _e(t,e){if(t.state.readOnly)return!1;let n="delete.selection",{state:i}=t,o=i.changeByRange(r=>{let{from:s,to:l}=r;if(s==l){let a=e(s);a<s?(n="delete.backward",a=Ie(t,a,!1)):a>s&&(n="delete.forward",a=Ie(t,a,!0)),s=Math.min(s,a),l=Math.max(l,a)}else s=Ie(t,s,!1),l=Ie(t,l,!0);return s==l?{range:r}:{changes:{from:s,to:l},range:d.cursor(s)}});return o.changes.empty?!1:(t.dispatch(i.update(o,{scrollIntoView:!0,userEvent:n,effects:n=="delete.selection"?g.announce.of(i.phrase("Selection deleted")):void 0})),!0)}function Ie(t,e,n){if(t instanceof g)for(let i of t.state.facet(g.atomicRanges).map(o=>o(t)))i.between(e,e,(o,r)=>{o<e&&r>e&&(e=n?r:o)});return e}const Qn=(t,e)=>_e(t,n=>{let{state:i}=t,o=i.doc.lineAt(n),r,s;if(!e&&n>o.from&&n<o.from+200&&!/[^ \t]/.test(r=o.text.slice(0,n-o.from))){if(r[r.length-1]=="	")return n-1;let l=kn(r,i.tabSize),a=l%ft(i)||ft(i);for(let c=0;c<a&&r[r.length-1-c]==" ";c++)n--;s=n}else s=he(o.text,n-o.from,e,e)+o.from,s==n&&o.number!=(e?i.doc.lines:1)&&(s+=e?1:-1);return s}),gt=t=>Qn(t,!1),_n=t=>Qn(t,!0),Xn=(t,e)=>_e(t,n=>{let i=n,{state:o}=t,r=o.doc.lineAt(i),s=o.charCategorizer(i);for(let l=null;;){if(i==(e?r.to:r.from)){i==n&&r.number!=(e?o.doc.lines:1)&&(i+=e?1:-1);break}let a=he(r.text,i-r.from,e)+r.from,c=r.text.slice(Math.min(i,a)-r.from,Math.max(i,a)-r.from),f=s(c);if(l!=null&&f!=l)break;(c!=" "||i!=n)&&(l=f),i=a}return i}),Yn=t=>Xn(t,!1),tr=t=>Xn(t,!0),Zn=t=>_e(t,e=>{let n=t.lineBlockAt(e).to;return e<n?n:Math.min(t.state.doc.length,e+1)}),nr=t=>_e(t,e=>{let n=t.lineBlockAt(e).from;return e>n?n:Math.max(0,e-1)}),ir=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let n=t.changeByRange(i=>({changes:{from:i.from,to:i.to,insert:kt.of(["",""])},range:d.cursor(i.from)}));return e(t.update(n,{scrollIntoView:!0,userEvent:"input"})),!0},or=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let n=t.changeByRange(i=>{if(!i.empty||i.from==0||i.from==t.doc.length)return{range:i};let o=i.from,r=t.doc.lineAt(o),s=o==r.from?o-1:he(r.text,o-r.from,!1)+r.from,l=o==r.to?o+1:he(r.text,o-r.from,!0)+r.from;return{changes:{from:s,to:l,insert:t.doc.slice(o,l).append(t.doc.slice(s,o))},range:d.cursor(l)}});return n.changes.empty?!1:(e(t.update(n,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function Xe(t){let e=[],n=-1;for(let i of t.selection.ranges){let o=t.doc.lineAt(i.from),r=t.doc.lineAt(i.to);if(!i.empty&&i.to==r.from&&(r=t.doc.lineAt(i.to-1)),n>=o.number){let s=e[e.length-1];s.to=r.to,s.ranges.push(i)}else e.push({from:o.from,to:r.to,ranges:[i]});n=r.number+1}return e}function ei(t,e,n){if(t.readOnly)return!1;let i=[],o=[];for(let r of Xe(t)){if(n?r.to==t.doc.length:r.from==0)continue;let s=t.doc.lineAt(n?r.to+1:r.from-1),l=s.length+1;if(n){i.push({from:r.to,to:s.to},{from:r.from,insert:s.text+t.lineBreak});for(let a of r.ranges)o.push(d.range(Math.min(t.doc.length,a.anchor+l),Math.min(t.doc.length,a.head+l)))}else{i.push({from:s.from,to:r.from},{from:r.to,insert:t.lineBreak+s.text});for(let a of r.ranges)o.push(d.range(a.anchor-l,a.head-l))}}return i.length?(e(t.update({changes:i,scrollIntoView:!0,selection:d.create(o,t.selection.mainIndex),userEvent:"move.line"})),!0):!1}const rr=({state:t,dispatch:e})=>ei(t,e,!1),sr=({state:t,dispatch:e})=>ei(t,e,!0);function ti(t,e,n){if(t.readOnly)return!1;let i=[];for(let o of Xe(t))n?i.push({from:o.from,insert:t.doc.slice(o.from,o.to)+t.lineBreak}):i.push({from:o.to,insert:t.lineBreak+t.doc.slice(o.from,o.to)});return e(t.update({changes:i,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const lr=({state:t,dispatch:e})=>ti(t,e,!1),ar=({state:t,dispatch:e})=>ti(t,e,!0),cr=t=>{if(t.state.readOnly)return!1;let{state:e}=t,n=e.changes(Xe(e).map(({from:o,to:r})=>(o>0?o--:r<e.doc.length&&r++,{from:o,to:r}))),i=me(e.selection,o=>t.moveVertically(o,!0)).map(n);return t.dispatch({changes:n,selection:i,scrollIntoView:!0,userEvent:"delete.line"}),!0};function fr(t,e){if(/\(\)|\[\]|\{\}/.test(t.sliceDoc(e-1,e+1)))return{from:e,to:e};let n=te(t).resolveInner(e),i=n.childBefore(e),o=n.childAfter(e),r;return i&&o&&i.to<=e&&o.from>=e&&(r=i.type.prop(ct.closedBy))&&r.indexOf(o.name)>-1&&t.doc.lineAt(i.to).from==t.doc.lineAt(o.from).from?{from:i.to,to:o.from}:null}const hr=ni(!1),ur=ni(!0);function ni(t){return({state:e,dispatch:n})=>{if(e.readOnly)return!1;let i=e.changeByRange(o=>{let{from:r,to:s}=o,l=e.doc.lineAt(r),a=!t&&r==s&&fr(e,r);t&&(r=s=(s<=l.to?l:e.doc.lineAt(s)).to);let c=new bn(e,{simulateBreak:r,simulateDoubleBreak:!!a}),f=Sn(c,r);for(f==null&&(f=/^\s*/.exec(e.doc.lineAt(r).text)[0].length);s<l.to&&/\s/.test(l.text[s-l.from]);)s++;a?{from:r,to:s}=a:r>l.from&&r<l.from+100&&!/\S/.test(l.text.slice(0,r))&&(r=l.from);let h=["",We(e,f)];return a&&h.push(We(e,c.lineIndent(l.from,-1))),{changes:{from:r,to:s,insert:kt.of(h)},range:d.cursor(r+1+h[1].length)}});return n(e.update(i,{scrollIntoView:!0,userEvent:"input"})),!0}}function Bt(t,e){let n=-1;return t.changeByRange(i=>{let o=[];for(let s=i.from;s<=i.to;){let l=t.doc.lineAt(s);l.number>n&&(i.empty||i.to>l.from)&&(e(l,o,i),n=l.number),s=l.to+1}let r=t.changes(o);return{changes:o,range:d.range(r.mapPos(i.anchor,1),r.mapPos(i.head,1))}})}const dr=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let n=Object.create(null),i=new bn(t,{overrideIndentation:r=>{let s=n[r];return s??-1}}),o=Bt(t,(r,s,l)=>{let a=Sn(i,r.from);if(a==null)return;/\S/.test(r.text)||(a=0);let c=/^\s*/.exec(r.text)[0],f=We(t,a);(c!=f||l.from<r.from+c.length)&&(n[r.from]=a,s.push({from:r.from,to:r.from+c.length,insert:f}))});return o.changes.empty||e(t.update(o,{userEvent:"indent"})),!0},ii=({state:t,dispatch:e})=>t.readOnly?!1:(e(t.update(Bt(t,(n,i)=>{i.push({from:n.from,insert:t.facet(Ct)})}),{userEvent:"input.indent"})),!0),oi=({state:t,dispatch:e})=>t.readOnly?!1:(e(t.update(Bt(t,(n,i)=>{let o=/^\s*/.exec(n.text)[0];if(!o)return;let r=kn(o,t.tabSize),s=0,l=We(t,Math.max(0,r-ft(t)));for(;s<o.length&&s<l.length&&o.charCodeAt(s)==l.charCodeAt(s);)s++;i.push({from:n.from+s,to:n.from+o.length,insert:l.slice(s)})}),{userEvent:"delete.dedent"})),!0),mr=[{key:"Ctrl-b",run:Rn,shift:Hn,preventDefault:!0},{key:"Ctrl-f",run:On,shift:Vn},{key:"Ctrl-p",run:Fn,shift:Kn},{key:"Ctrl-n",run:Nn,shift:Gn},{key:"Ctrl-a",run:Fo,shift:Qo},{key:"Ctrl-e",run:No,shift:_o},{key:"Ctrl-d",run:_n},{key:"Ctrl-h",run:gt},{key:"Ctrl-k",run:Zn},{key:"Ctrl-Alt-h",run:Yn},{key:"Ctrl-o",run:ir},{key:"Ctrl-t",run:or},{key:"Ctrl-v",run:pt}],pr=[{key:"ArrowLeft",run:Rn,shift:Hn,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:Do,shift:Uo,preventDefault:!0},{mac:"Cmd-ArrowLeft",run:Po,shift:Go,preventDefault:!0},{key:"ArrowRight",run:On,shift:Vn,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:Bo,shift:Ho,preventDefault:!0},{mac:"Cmd-ArrowRight",run:Wo,shift:Jo,preventDefault:!0},{key:"ArrowUp",run:Fn,shift:Kn,preventDefault:!0},{mac:"Cmd-ArrowUp",run:zt,shift:Kt},{mac:"Ctrl-ArrowUp",run:Ut,shift:Ht},{key:"ArrowDown",run:Nn,shift:Gn,preventDefault:!0},{mac:"Cmd-ArrowDown",run:jt,shift:Gt},{mac:"Ctrl-ArrowDown",run:pt,shift:Vt},{key:"PageUp",run:Ut,shift:Ht},{key:"PageDown",run:pt,shift:Vt},{key:"Home",run:Oo,shift:Ko,preventDefault:!0},{key:"Mod-Home",run:zt,shift:Kt},{key:"End",run:Ro,shift:jo,preventDefault:!0},{key:"Mod-End",run:jt,shift:Gt},{key:"Enter",run:hr},{key:"Mod-a",run:Xo},{key:"Backspace",run:gt,shift:gt},{key:"Delete",run:_n},{key:"Mod-Backspace",mac:"Alt-Backspace",run:Yn},{key:"Mod-Delete",mac:"Alt-Delete",run:tr},{mac:"Mod-Backspace",run:nr},{mac:"Mod-Delete",run:Zn}].concat(mr.map(t=>({mac:t.key,run:t.run,shift:t.shift}))),gr=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:Io,shift:Vo},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:To,shift:zo},{key:"Alt-ArrowUp",run:rr},{key:"Shift-Alt-ArrowUp",run:lr},{key:"Alt-ArrowDown",run:sr},{key:"Shift-Alt-ArrowDown",run:ar},{key:"Escape",run:er},{key:"Mod-Enter",run:ur},{key:"Alt-l",mac:"Ctrl-l",run:Yo},{key:"Mod-i",run:Zo,preventDefault:!0},{key:"Mod-[",run:oi},{key:"Mod-]",run:ii},{key:"Mod-Alt-\\",run:dr},{key:"Shift-Mod-k",run:cr},{key:"Shift-Mod-\\",run:qo},{key:"Mod-/",run:lo},{key:"Alt-A",run:co}].concat(pr),yr={key:"Tab",run:ii,shift:oi};function y(){var t=arguments[0];typeof t=="string"&&(t=document.createElement(t));var e=1,n=arguments[1];if(n&&typeof n=="object"&&n.nodeType==null&&!Array.isArray(n)){for(var i in n)if(Object.prototype.hasOwnProperty.call(n,i)){var o=n[i];typeof o=="string"?t.setAttribute(i,o):o!=null&&(t[i]=o)}e++}for(;e<arguments.length;e++)ri(t,arguments[e]);return t}function ri(t,e){if(typeof e=="string")t.appendChild(document.createTextNode(e));else if(e!=null)if(e.nodeType!=null)t.appendChild(e);else if(Array.isArray(e))for(var n=0;n<e.length;n++)ri(t,e[n]);else throw new RangeError("Unsupported child node: "+e)}const Jt=typeof String.prototype.normalize=="function"?t=>t.normalize("NFKD"):t=>t;class ue{constructor(e,n,i=0,o=e.length,r,s){this.test=s,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=e.iterRange(i,o),this.bufferStart=i,this.normalize=r?l=>r(Jt(l)):Jt,this.query=this.normalize(n)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return P(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let e=this.peek();if(e<0)return this.done=!0,this;let n=At(e),i=this.bufferStart+this.bufferPos;this.bufferPos+=K(e);let o=this.normalize(n);for(let r=0,s=i;;r++){let l=o.charCodeAt(r),a=this.match(l,s);if(a)return this.value=a,this;if(r==o.length-1)break;s==i&&r<n.length&&n.charCodeAt(r)==l&&s++}}}match(e,n){let i=null;for(let o=0;o<this.matches.length;o+=2){let r=this.matches[o],s=!1;this.query.charCodeAt(r)==e&&(r==this.query.length-1?i={from:this.matches[o+1],to:n+1}:(this.matches[o]++,s=!0)),s||(this.matches.splice(o,2),o-=2)}return this.query.charCodeAt(0)==e&&(this.query.length==1?i={from:n,to:n+1}:this.matches.push(1,n)),i&&this.test&&!this.test(i.from,i.to,this.buffer,this.bufferPos)&&(i=null),i}}typeof Symbol<"u"&&(ue.prototype[Symbol.iterator]=function(){return this});const si={from:-1,to:-1,match:/.*/.exec("")},Et="gm"+(/x/.unicode==null?"":"u");class li{constructor(e,n,i,o=0,r=e.length){if(this.text=e,this.to=r,this.curLine="",this.done=!1,this.value=si,/\\[sWDnr]|\n|\r|\[\^/.test(n))return new ai(e,n,i,o,r);this.re=new RegExp(n,Et+(i!=null&&i.ignoreCase?"i":"")),this.test=i==null?void 0:i.test,this.iter=e.iter();let s=e.lineAt(o);this.curLineStart=s.from,this.matchPos=Ne(e,o),this.getLine(this.curLineStart)}getLine(e){this.iter.next(e),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let e=this.matchPos-this.curLineStart;;){this.re.lastIndex=e;let n=this.matchPos<=this.to&&this.re.exec(this.curLine);if(n){let i=this.curLineStart+n.index,o=i+n[0].length;if(this.matchPos=Ne(this.text,o+(i==o?1:0)),i==this.curLineStart+this.curLine.length&&this.nextLine(),(i<o||i>this.value.to)&&(!this.test||this.test(i,o,n)))return this.value={from:i,to:o,match:n},this;e=this.matchPos-this.curLineStart}else if(this.curLineStart+this.curLine.length<this.to)this.nextLine(),e=0;else return this.done=!0,this}}}const ot=new WeakMap;class ce{constructor(e,n){this.from=e,this.text=n}get to(){return this.from+this.text.length}static get(e,n,i){let o=ot.get(e);if(!o||o.from>=i||o.to<=n){let l=new ce(n,e.sliceString(n,i));return ot.set(e,l),l}if(o.from==n&&o.to==i)return o;let{text:r,from:s}=o;return s>n&&(r=e.sliceString(n,s)+r,s=n),o.to<i&&(r+=e.sliceString(o.to,i)),ot.set(e,new ce(s,r)),new ce(n,r.slice(n-s,i-s))}}class ai{constructor(e,n,i,o,r){this.text=e,this.to=r,this.done=!1,this.value=si,this.matchPos=Ne(e,o),this.re=new RegExp(n,Et+(i!=null&&i.ignoreCase?"i":"")),this.test=i==null?void 0:i.test,this.flat=ce.get(e,o,this.chunkEnd(o+5e3))}chunkEnd(e){return e>=this.to?this.to:this.text.lineAt(e).to}next(){for(;;){let e=this.re.lastIndex=this.matchPos-this.flat.from,n=this.re.exec(this.flat.text);if(n&&!n[0]&&n.index==e&&(this.re.lastIndex=e+1,n=this.re.exec(this.flat.text)),n){let i=this.flat.from+n.index,o=i+n[0].length;if((this.flat.to>=this.to||n.index+n[0].length<=this.flat.text.length-10)&&(!this.test||this.test(i,o,n)))return this.value={from:i,to:o,match:n},this.matchPos=Ne(this.text,o+(i==o?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=ce.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+this.flat.text.length*2))}}}typeof Symbol<"u"&&(li.prototype[Symbol.iterator]=ai.prototype[Symbol.iterator]=function(){return this});function xr(t){try{return new RegExp(t,Et),!0}catch{return!1}}function Ne(t,e){if(e>=t.length)return e;let n=t.lineAt(e),i;for(;e<n.to&&(i=n.text.charCodeAt(e-n.from))>=56320&&i<57344;)e++;return e}function yt(t){let e=y("input",{class:"cm-textfield",name:"line"}),n=y("form",{class:"cm-gotoLine",onkeydown:o=>{o.keyCode==27?(o.preventDefault(),t.dispatch({effects:$e.of(!1)}),t.focus()):o.keyCode==13&&(o.preventDefault(),i())},onsubmit:o=>{o.preventDefault(),i()}},y("label",t.state.phrase("Go to line"),": ",e)," ",y("button",{class:"cm-button",type:"submit"},t.state.phrase("go")));function i(){let o=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(e.value);if(!o)return;let{state:r}=t,s=r.doc.lineAt(r.selection.main.head),[,l,a,c,f]=o,h=c?+c.slice(1):0,u=a?+a:s.number;if(a&&f){let x=u/100;l&&(x=x*(l=="-"?-1:1)+s.number/r.doc.lines),u=Math.round(r.doc.lines*x)}else a&&l&&(u=u*(l=="-"?-1:1)+s.number);let p=r.doc.line(Math.max(1,Math.min(r.doc.lines,u)));t.dispatch({effects:$e.of(!1),selection:d.cursor(p.from+Math.max(0,Math.min(h,p.length))),scrollIntoView:!0}),t.focus()}return{dom:n}}const $e=k.define(),Qt=ee.define({create(){return!0},update(t,e){for(let n of e.effects)n.is($e)&&(t=n.value);return t},provide:t=>wt.from(t,e=>e?yt:null)}),br=t=>{let e=Se(t,yt);if(!e){let n=[$e.of(!0)];t.state.field(Qt,!1)==null&&n.push(k.appendConfig.of([Qt,Sr])),t.dispatch({effects:n}),e=Se(t,yt)}return e&&e.dom.querySelector("input").focus(),!0},Sr=g.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px","& label":{fontSize:"80%"}}}),kr={highlightWordAroundCursor:!1,minSelectionLength:1,maxMatches:100,wholeWords:!1},ci=Z.define({combine(t){return we(t,kr,{highlightWordAroundCursor:(e,n)=>e||n,minSelectionLength:Math.min,maxMatches:Math.min})}});function Cr(t){let e=[Lr,wr];return t&&e.push(ci.of(t)),e}const vr=b.mark({class:"cm-selectionMatch"}),Ar=b.mark({class:"cm-selectionMatch cm-selectionMatch-main"});function _t(t,e,n,i){return(n==0||t(e.sliceDoc(n-1,n))!=M.Word)&&(i==e.doc.length||t(e.sliceDoc(i,i+1))!=M.Word)}function Mr(t,e,n,i){return t(e.sliceDoc(n,n+1))==M.Word&&t(e.sliceDoc(i-1,i))==M.Word}const wr=vt.fromClass(class{constructor(t){this.decorations=this.getDeco(t)}update(t){(t.selectionSet||t.docChanged||t.viewportChanged)&&(this.decorations=this.getDeco(t.view))}getDeco(t){let e=t.state.facet(ci),{state:n}=t,i=n.selection;if(i.ranges.length>1)return b.none;let o=i.main,r,s=null;if(o.empty){if(!e.highlightWordAroundCursor)return b.none;let a=n.wordAt(o.head);if(!a)return b.none;s=n.charCategorizer(o.head),r=n.sliceDoc(a.from,a.to)}else{let a=o.to-o.from;if(a<e.minSelectionLength||a>200)return b.none;if(e.wholeWords){if(r=n.sliceDoc(o.from,o.to),s=n.charCategorizer(o.head),!(_t(s,n,o.from,o.to)&&Mr(s,n,o.from,o.to)))return b.none}else if(r=n.sliceDoc(o.from,o.to).trim(),!r)return b.none}let l=[];for(let a of t.visibleRanges){let c=new ue(n.doc,r,a.from,a.to);for(;!c.next().done;){let{from:f,to:h}=c.value;if((!s||_t(s,n,f,h))&&(o.empty&&f<=o.from&&h>=o.to?l.push(Ar.range(f,h)):(f>=o.to||h<=o.from)&&l.push(vr.range(f,h)),l.length>e.maxMatches))return b.none}}return b.set(l)}},{decorations:t=>t.decorations}),Lr=g.baseTheme({".cm-selectionMatch":{backgroundColor:"#99ff7780"},".cm-searchMatch .cm-selectionMatch":{backgroundColor:"transparent"}}),Dr=({state:t,dispatch:e})=>{let{selection:n}=t,i=d.create(n.ranges.map(o=>t.wordAt(o.head)||d.cursor(o.head)),n.mainIndex);return i.eq(n)?!1:(e(t.update({selection:i})),!0)};function Br(t,e){let{main:n,ranges:i}=t.selection,o=t.wordAt(n.head),r=o&&o.from==n.from&&o.to==n.to;for(let s=!1,l=new ue(t.doc,e,i[i.length-1].to);;)if(l.next(),l.done){if(s)return null;l=new ue(t.doc,e,0,Math.max(0,i[i.length-1].from-1)),s=!0}else{if(s&&i.some(a=>a.from==l.value.from))continue;if(r){let a=t.wordAt(l.value.from);if(!a||a.from!=l.value.from||a.to!=l.value.to)continue}return l.value}}const Er=({state:t,dispatch:e})=>{let{ranges:n}=t.selection;if(n.some(r=>r.from===r.to))return Dr({state:t,dispatch:e});let i=t.sliceDoc(n[0].from,n[0].to);if(t.selection.ranges.some(r=>t.sliceDoc(r.from,r.to)!=i))return!1;let o=Br(t,i);return o?(e(t.update({selection:t.selection.addRange(d.range(o.from,o.to),!1),effects:g.scrollIntoView(o.to)})),!0):!1},pe=Z.define({combine(t){return we(t,{top:!1,caseSensitive:!1,literal:!1,regexp:!1,wholeWord:!1,createPanel:e=>new Hr(e),scrollToMatch:e=>g.scrollIntoView(e)})}});class fi{constructor(e){this.search=e.search,this.caseSensitive=!!e.caseSensitive,this.literal=!!e.literal,this.regexp=!!e.regexp,this.replace=e.replace||"",this.valid=!!this.search&&(!this.regexp||xr(this.search)),this.unquoted=this.unquote(this.search),this.wholeWord=!!e.wholeWord}unquote(e){return this.literal?e:e.replace(/\\([nrt\\])/g,(n,i)=>i=="n"?`
`:i=="r"?"\r":i=="t"?"	":"\\")}eq(e){return this.search==e.search&&this.replace==e.replace&&this.caseSensitive==e.caseSensitive&&this.regexp==e.regexp&&this.wholeWord==e.wholeWord}create(){return this.regexp?new Or(this):new Tr(this)}getCursor(e,n=0,i){let o=e.doc?e:ke.create({doc:e});return i==null&&(i=o.doc.length),this.regexp?se(this,o,n,i):re(this,o,n,i)}}class hi{constructor(e){this.spec=e}}function re(t,e,n,i){return new ue(e.doc,t.unquoted,n,i,t.caseSensitive?void 0:o=>o.toLowerCase(),t.wholeWord?Ir(e.doc,e.charCategorizer(e.selection.main.head)):void 0)}function Ir(t,e){return(n,i,o,r)=>((r>n||r+o.length<i)&&(r=Math.max(0,n-2),o=t.sliceString(r,Math.min(t.length,i+2))),(e(qe(o,n-r))!=M.Word||e(Ue(o,n-r))!=M.Word)&&(e(Ue(o,i-r))!=M.Word||e(qe(o,i-r))!=M.Word))}class Tr extends hi{constructor(e){super(e)}nextMatch(e,n,i){let o=re(this.spec,e,i,e.doc.length).nextOverlapping();return o.done&&(o=re(this.spec,e,0,n).nextOverlapping()),o.done?null:o.value}prevMatchInRange(e,n,i){for(let o=i;;){let r=Math.max(n,o-1e4-this.spec.unquoted.length),s=re(this.spec,e,r,o),l=null;for(;!s.nextOverlapping().done;)l=s.value;if(l)return l;if(r==n)return null;o-=1e4}}prevMatch(e,n,i){return this.prevMatchInRange(e,0,n)||this.prevMatchInRange(e,i,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace)}matchAll(e,n){let i=re(this.spec,e,0,e.doc.length),o=[];for(;!i.next().done;){if(o.length>=n)return null;o.push(i.value)}return o}highlight(e,n,i,o){let r=re(this.spec,e,Math.max(0,n-this.spec.unquoted.length),Math.min(i+this.spec.unquoted.length,e.doc.length));for(;!r.next().done;)o(r.value.from,r.value.to)}}function se(t,e,n,i){return new li(e.doc,t.search,{ignoreCase:!t.caseSensitive,test:t.wholeWord?Rr(e.charCategorizer(e.selection.main.head)):void 0},n,i)}function qe(t,e){return t.slice(he(t,e,!1),e)}function Ue(t,e){return t.slice(e,he(t,e))}function Rr(t){return(e,n,i)=>!i[0].length||(t(qe(i.input,i.index))!=M.Word||t(Ue(i.input,i.index))!=M.Word)&&(t(Ue(i.input,i.index+i[0].length))!=M.Word||t(qe(i.input,i.index+i[0].length))!=M.Word)}class Or extends hi{nextMatch(e,n,i){let o=se(this.spec,e,i,e.doc.length).next();return o.done&&(o=se(this.spec,e,0,n).next()),o.done?null:o.value}prevMatchInRange(e,n,i){for(let o=1;;o++){let r=Math.max(n,i-o*1e4),s=se(this.spec,e,r,i),l=null;for(;!s.next().done;)l=s.value;if(l&&(r==n||l.from>r+10))return l;if(r==n)return null}}prevMatch(e,n,i){return this.prevMatchInRange(e,0,n)||this.prevMatchInRange(e,i,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace.replace(/\$([$&\d+])/g,(n,i)=>i=="$"?"$":i=="&"?e.match[0]:i!="0"&&+i<e.match.length?e.match[i]:n))}matchAll(e,n){let i=se(this.spec,e,0,e.doc.length),o=[];for(;!i.next().done;){if(o.length>=n)return null;o.push(i.value)}return o}highlight(e,n,i,o){let r=se(this.spec,e,Math.max(0,n-250),Math.min(i+250,e.doc.length));for(;!r.next().done;)o(r.value.from,r.value.to)}}const Ce=k.define(),It=k.define(),J=ee.define({create(t){return new rt(xt(t).create(),null)},update(t,e){for(let n of e.effects)n.is(Ce)?t=new rt(n.value.create(),t.panel):n.is(It)&&(t=new rt(t.query,n.value?Tt:null));return t},provide:t=>wt.from(t,e=>e.panel)});class rt{constructor(e,n){this.query=e,this.panel=n}}const Pr=b.mark({class:"cm-searchMatch"}),Wr=b.mark({class:"cm-searchMatch cm-searchMatch-selected"}),Fr=vt.fromClass(class{constructor(t){this.view=t,this.decorations=this.highlight(t.state.field(J))}update(t){let e=t.state.field(J);(e!=t.startState.field(J)||t.docChanged||t.selectionSet||t.viewportChanged)&&(this.decorations=this.highlight(e))}highlight({query:t,panel:e}){if(!e||!t.spec.valid)return b.none;let{view:n}=this,i=new Ui;for(let o=0,r=n.visibleRanges,s=r.length;o<s;o++){let{from:l,to:a}=r[o];for(;o<s-1&&a>r[o+1].from-2*250;)a=r[++o].to;t.highlight(n.state,l,a,(c,f)=>{let h=n.state.selection.ranges.some(u=>u.from==c&&u.to==f);i.add(c,f,h?Wr:Pr)})}return i.finish()}},{decorations:t=>t.decorations});function Le(t){return e=>{let n=e.state.field(J,!1);return n&&n.query.spec.valid?t(e,n):mi(e)}}const He=Le((t,{query:e})=>{let{to:n}=t.state.selection.main,i=e.nextMatch(t.state,n,n);if(!i)return!1;let o=d.single(i.from,i.to),r=t.state.facet(pe);return t.dispatch({selection:o,effects:[Rt(t,i),r.scrollToMatch(o.main,t)],userEvent:"select.search"}),di(t),!0}),Ve=Le((t,{query:e})=>{let{state:n}=t,{from:i}=n.selection.main,o=e.prevMatch(n,i,i);if(!o)return!1;let r=d.single(o.from,o.to),s=t.state.facet(pe);return t.dispatch({selection:r,effects:[Rt(t,o),s.scrollToMatch(r.main,t)],userEvent:"select.search"}),di(t),!0}),Nr=Le((t,{query:e})=>{let n=e.matchAll(t.state,1e3);return!n||!n.length?!1:(t.dispatch({selection:d.create(n.map(i=>d.range(i.from,i.to))),userEvent:"select.search.matches"}),!0)}),$r=({state:t,dispatch:e})=>{let n=t.selection;if(n.ranges.length>1||n.main.empty)return!1;let{from:i,to:o}=n.main,r=[],s=0;for(let l=new ue(t.doc,t.sliceDoc(i,o));!l.next().done;){if(r.length>1e3)return!1;l.value.from==i&&(s=r.length),r.push(d.range(l.value.from,l.value.to))}return e(t.update({selection:d.create(r,s),userEvent:"select.search.matches"})),!0},Xt=Le((t,{query:e})=>{let{state:n}=t,{from:i,to:o}=n.selection.main;if(n.readOnly)return!1;let r=e.nextMatch(n,i,i);if(!r)return!1;let s=[],l,a,c=[];if(r.from==i&&r.to==o&&(a=n.toText(e.getReplacement(r)),s.push({from:r.from,to:r.to,insert:a}),r=e.nextMatch(n,r.from,r.to),c.push(g.announce.of(n.phrase("replaced match on line $",n.doc.lineAt(i).number)+"."))),r){let f=s.length==0||s[0].from>=r.to?0:r.to-r.from-a.length;l=d.single(r.from-f,r.to-f),c.push(Rt(t,r)),c.push(n.facet(pe).scrollToMatch(l.main,t))}return t.dispatch({changes:s,selection:l,effects:c,userEvent:"input.replace"}),!0}),qr=Le((t,{query:e})=>{if(t.state.readOnly)return!1;let n=e.matchAll(t.state,1e9).map(o=>{let{from:r,to:s}=o;return{from:r,to:s,insert:e.getReplacement(o)}});if(!n.length)return!1;let i=t.state.phrase("replaced $ matches",n.length)+".";return t.dispatch({changes:n,effects:g.announce.of(i),userEvent:"input.replace.all"}),!0});function Tt(t){return t.state.facet(pe).createPanel(t)}function xt(t,e){var n,i,o,r,s;let l=t.selection.main,a=l.empty||l.to>l.from+100?"":t.sliceDoc(l.from,l.to);if(e&&!a)return e;let c=t.facet(pe);return new fi({search:((n=e==null?void 0:e.literal)!==null&&n!==void 0?n:c.literal)?a:a.replace(/\n/g,"\\n"),caseSensitive:(i=e==null?void 0:e.caseSensitive)!==null&&i!==void 0?i:c.caseSensitive,literal:(o=e==null?void 0:e.literal)!==null&&o!==void 0?o:c.literal,regexp:(r=e==null?void 0:e.regexp)!==null&&r!==void 0?r:c.regexp,wholeWord:(s=e==null?void 0:e.wholeWord)!==null&&s!==void 0?s:c.wholeWord})}function ui(t){let e=Se(t,Tt);return e&&e.dom.querySelector("[main-field]")}function di(t){let e=ui(t);e&&e==t.root.activeElement&&e.select()}const mi=t=>{let e=t.state.field(J,!1);if(e&&e.panel){let n=ui(t);if(n&&n!=t.root.activeElement){let i=xt(t.state,e.query.spec);i.valid&&t.dispatch({effects:Ce.of(i)}),n.focus(),n.select()}}else t.dispatch({effects:[It.of(!0),e?Ce.of(xt(t.state,e.query.spec)):k.appendConfig.of(zr)]});return!0},pi=t=>{let e=t.state.field(J,!1);if(!e||!e.panel)return!1;let n=Se(t,Tt);return n&&n.dom.contains(t.root.activeElement)&&t.focus(),t.dispatch({effects:It.of(!1)}),!0},Ur=[{key:"Mod-f",run:mi,scope:"editor search-panel"},{key:"F3",run:He,shift:Ve,scope:"editor search-panel",preventDefault:!0},{key:"Mod-g",run:He,shift:Ve,scope:"editor search-panel",preventDefault:!0},{key:"Escape",run:pi,scope:"editor search-panel"},{key:"Mod-Shift-l",run:$r},{key:"Alt-g",run:br},{key:"Mod-d",run:Er,preventDefault:!0}];class Hr{constructor(e){this.view=e;let n=this.query=e.state.field(J).query.spec;this.commit=this.commit.bind(this),this.searchField=y("input",{value:n.search,placeholder:E(e,"Find"),"aria-label":E(e,"Find"),class:"cm-textfield",name:"search",form:"","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=y("input",{value:n.replace,placeholder:E(e,"Replace"),"aria-label":E(e,"Replace"),class:"cm-textfield",name:"replace",form:"",onchange:this.commit,onkeyup:this.commit}),this.caseField=y("input",{type:"checkbox",name:"case",form:"",checked:n.caseSensitive,onchange:this.commit}),this.reField=y("input",{type:"checkbox",name:"re",form:"",checked:n.regexp,onchange:this.commit}),this.wordField=y("input",{type:"checkbox",name:"word",form:"",checked:n.wholeWord,onchange:this.commit});function i(o,r,s){return y("button",{class:"cm-button",name:o,onclick:r,type:"button"},s)}this.dom=y("div",{onkeydown:o=>this.keydown(o),class:"cm-search"},[this.searchField,i("next",()=>He(e),[E(e,"next")]),i("prev",()=>Ve(e),[E(e,"previous")]),i("select",()=>Nr(e),[E(e,"all")]),y("label",null,[this.caseField,E(e,"match case")]),y("label",null,[this.reField,E(e,"regexp")]),y("label",null,[this.wordField,E(e,"by word")]),...e.state.readOnly?[]:[y("br"),this.replaceField,i("replace",()=>Xt(e),[E(e,"replace")]),i("replaceAll",()=>qr(e),[E(e,"replace all")])],y("button",{name:"close",onclick:()=>pi(e),"aria-label":E(e,"close"),type:"button"},["Ã—"])])}commit(){let e=new fi({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});e.eq(this.query)||(this.query=e,this.view.dispatch({effects:Ce.of(e)}))}keydown(e){Hi(this.view,e,"search-panel")?e.preventDefault():e.keyCode==13&&e.target==this.searchField?(e.preventDefault(),(e.shiftKey?Ve:He)(this.view)):e.keyCode==13&&e.target==this.replaceField&&(e.preventDefault(),Xt(this.view))}update(e){for(let n of e.transactions)for(let i of n.effects)i.is(Ce)&&!i.value.eq(this.query)&&this.setQuery(i.value)}setQuery(e){this.query=e,this.searchField.value=e.search,this.replaceField.value=e.replace,this.caseField.checked=e.caseSensitive,this.reField.checked=e.regexp,this.wordField.checked=e.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(pe).top}}function E(t,e){return t.state.phrase(e)}const Te=30,Re=/[\s\.,:;?!]/;function Rt(t,{from:e,to:n}){let i=t.state.doc.lineAt(e),o=t.state.doc.lineAt(n).to,r=Math.max(i.from,e-Te),s=Math.min(o,n+Te),l=t.state.sliceDoc(r,s);if(r!=i.from){for(let a=0;a<Te;a++)if(!Re.test(l[a+1])&&Re.test(l[a])){l=l.slice(a);break}}if(s!=o){for(let a=l.length-1;a>l.length-Te;a--)if(!Re.test(l[a-1])&&Re.test(l[a])){l=l.slice(0,a);break}}return g.announce.of(`${t.state.phrase("current match")}. ${l} ${t.state.phrase("on line")} ${i.number}.`)}const Vr=g.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),zr=[J,Mt.lowest(Fr),Vr];class gi{constructor(e,n,i){this.state=e,this.pos=n,this.explicit=i,this.abortListeners=[]}tokenBefore(e){let n=te(this.state).resolveInner(this.pos,-1);for(;n&&e.indexOf(n.name)<0;)n=n.parent;return n?{from:n.from,to:this.pos,text:this.state.sliceDoc(n.from,this.pos),type:n.type}:null}matchBefore(e){let n=this.state.doc.lineAt(this.pos),i=Math.max(n.from,this.pos-250),o=n.text.slice(i-n.from,this.pos-n.from),r=o.search(yi(e,!1));return r<0?null:{from:i+r,to:this.pos,text:o.slice(r)}}get aborted(){return this.abortListeners==null}addEventListener(e,n){e=="abort"&&this.abortListeners&&this.abortListeners.push(n)}}function Yt(t){let e=Object.keys(t).join(""),n=/\w/.test(e);return n&&(e=e.replace(/\w/g,"")),`[${n?"\\w":""}${e.replace(/[^\w\s]/g,"\\$&")}]`}function jr(t){let e=Object.create(null),n=Object.create(null);for(let{label:o}of t){e[o[0]]=!0;for(let r=1;r<o.length;r++)n[o[r]]=!0}let i=Yt(e)+Yt(n)+"*$";return[new RegExp("^"+i),new RegExp(i)]}function Kr(t){let e=t.map(o=>typeof o=="string"?{label:o}:o),[n,i]=e.every(o=>/^\w+$/.test(o.label))?[/\w*$/,/\w+$/]:jr(e);return o=>{let r=o.matchBefore(i);return r||o.explicit?{from:r?r.from:o.pos,options:e,validFor:n}:null}}function pl(t,e){return n=>{for(let i=te(n.state).resolveInner(n.pos,-1);i;i=i.parent){if(t.indexOf(i.name)>-1)return null;if(i.type.isTop)break}return e(n)}}class Zt{constructor(e,n,i,o){this.completion=e,this.source=n,this.match=i,this.score=o}}function Q(t){return t.selection.main.from}function yi(t,e){var n;let{source:i}=t,o=e&&i[0]!="^",r=i[i.length-1]!="$";return!o&&!r?t:new RegExp(`${o?"^":""}(?:${i})${r?"$":""}`,(n=t.flags)!==null&&n!==void 0?n:t.ignoreCase?"i":"")}const xi=je.define();function Gr(t,e,n,i){let{main:o}=t.selection,r=n-o.from,s=i-o.from;return Object.assign(Object.assign({},t.changeByRange(l=>l!=o&&n!=i&&t.sliceDoc(l.from+r,l.from+s)!=t.sliceDoc(n,i)?{range:l}:{changes:{from:l.from+r,to:i==o.from?l.to:l.from+s,insert:e},range:d.cursor(l.from+r+e.length)})),{userEvent:"input.complete"})}const en=new WeakMap;function Jr(t){if(!Array.isArray(t))return t;let e=en.get(t);return e||en.set(t,e=Kr(t)),e}const Ot=k.define(),ve=k.define();class Qr{constructor(e){this.pattern=e,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[];for(let n=0;n<e.length;){let i=P(e,n),o=K(i);this.chars.push(i);let r=e.slice(n,n+o),s=r.toUpperCase();this.folded.push(P(s==r?r.toLowerCase():s,0)),n+=o}this.astral=e.length!=this.chars.length}match(e){if(this.pattern.length==0)return[-100];if(e.length<this.pattern.length)return null;let{chars:n,folded:i,any:o,precise:r,byWord:s}=this;if(n.length==1){let S=P(e,0),N=K(S),w=N==e.length?0:-100;if(S!=n[0])if(S==i[0])w+=-200;else return null;return[w,0,N]}let l=e.indexOf(this.pattern);if(l==0)return[e.length==this.pattern.length?0:-100,0,this.pattern.length];let a=n.length,c=0;if(l<0){for(let S=0,N=Math.min(e.length,200);S<N&&c<a;){let w=P(e,S);(w==n[c]||w==i[c])&&(o[c++]=S),S+=K(w)}if(c<a)return null}let f=0,h=0,u=!1,p=0,x=-1,R=-1,ne=/[a-z]/.test(e),G=!0;for(let S=0,N=Math.min(e.length,200),w=0;S<N&&h<a;){let C=P(e,S);l<0&&(f<a&&C==n[f]&&(r[f++]=S),p<a&&(C==n[p]||C==i[p]?(p==0&&(x=S),R=S+1,p++):p=0));let U,H=C<255?C>=48&&C<=57||C>=97&&C<=122?2:C>=65&&C<=90?1:0:(U=At(C))!=U.toLowerCase()?1:U!=U.toUpperCase()?2:0;(!S||H==1&&ne||w==0&&H!=0)&&(n[h]==C||i[h]==C&&(u=!0)?s[h++]=S:s.length&&(G=!1)),w=H,S+=K(C)}return h==a&&s[0]==0&&G?this.result(-100+(u?-200:0),s,e):p==a&&x==0?[-200-e.length+(R==e.length?0:-100),0,R]:l>-1?[-700-e.length,l,l+this.pattern.length]:p==a?[-200+-700-e.length,x,R]:h==a?this.result(-100+(u?-200:0)+-700+(G?0:-1100),s,e):n.length==2?null:this.result((o[0]?-700:0)+-200+-1100,o,e)}result(e,n,i){let o=[e-i.length],r=1;for(let s of n){let l=s+(this.astral?K(P(i,s)):1);r>1&&o[r-1]==s?o[r-1]=l:(o[r++]=s,o[r++]=l)}return o}}const B=Z.define({combine(t){return we(t,{activateOnTyping:!0,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,tooltipClass:()=>"",optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],positionInfo:_r,compareCompletions:(e,n)=>e.label.localeCompare(n.label),interactionDelay:75},{defaultKeymap:(e,n)=>e&&n,closeOnBlur:(e,n)=>e&&n,icons:(e,n)=>e&&n,tooltipClass:(e,n)=>i=>tn(e(i),n(i)),optionClass:(e,n)=>i=>tn(e(i),n(i)),addToOptions:(e,n)=>e.concat(n)})}});function tn(t,e){return t?e?t+" "+e:t:e}function _r(t,e,n,i,o){let r=t.textDirection==Cn.RTL,s=r,l=!1,a="top",c,f,h=e.left-o.left,u=o.right-e.right,p=i.right-i.left,x=i.bottom-i.top;if(s&&h<Math.min(p,u)?s=!1:!s&&u<Math.min(p,h)&&(s=!0),p<=(s?h:u))c=Math.max(o.top,Math.min(n.top,o.bottom-x))-e.top,f=Math.min(400,s?h:u);else{l=!0,f=Math.min(400,(r?e.right:o.right-e.left)-30);let R=o.bottom-e.bottom;R>=x||R>e.top?c=n.bottom-e.top:(a="bottom",c=e.bottom-n.top)}return{style:`${a}: ${c}px; max-width: ${f}px`,class:"cm-completionInfo-"+(l?r?"left-narrow":"right-narrow":s?"left":"right")}}function Oe(t,e="option"){return n=>{let i=n.state.field(I,!1);if(!i||!i.open||i.open.disabled||Date.now()-i.open.timestamp<n.state.facet(B).interactionDelay)return!1;let o=1,r;e=="page"&&(r=vn(n,i.open.tooltip))&&(o=Math.max(2,Math.floor(r.dom.offsetHeight/r.dom.querySelector("li").offsetHeight)-1));let{length:s}=i.open.options,l=i.open.selected>-1?i.open.selected+o*(t?1:-1):t?0:s-1;return l<0?l=e=="page"?0:s-1:l>=s&&(l=e=="page"?s-1:0),n.dispatch({effects:ki.of(l)}),!0}}const Xr=t=>{let e=t.state.field(I,!1);return t.state.readOnly||!e||!e.open||e.open.selected<0||Date.now()-e.open.timestamp<t.state.facet(B).interactionDelay?!1:e.open.disabled?!0:bi(t,e.open.options[e.open.selected])},Yr=t=>t.state.field(I,!1)?(t.dispatch({effects:Ot.of(!0)}),!0):!1,Zr=t=>{let e=t.state.field(I,!1);return!e||!e.active.some(n=>n.state!=0)?!1:(t.dispatch({effects:ve.of(null)}),!0)};class es{constructor(e,n){this.active=e,this.context=n,this.time=Date.now(),this.updates=[],this.done=void 0}}const nn=50,ts=50,ns=1e3,is=vt.fromClass(class{constructor(t){this.view=t,this.debounceUpdate=-1,this.running=[],this.debounceAccept=-1,this.composing=0;for(let e of t.state.field(I).active)e.state==1&&this.startQuery(e)}update(t){let e=t.state.field(I);if(!t.selectionSet&&!t.docChanged&&t.startState.field(I)==e)return;let n=t.transactions.some(i=>(i.selection||i.docChanged)&&!bt(i));for(let i=0;i<this.running.length;i++){let o=this.running[i];if(n||o.updates.length+t.transactions.length>ts&&Date.now()-o.time>ns){for(let r of o.context.abortListeners)try{r()}catch(s){ut(this.view.state,s)}o.context.abortListeners=null,this.running.splice(i--,1)}else o.updates.push(...t.transactions)}if(this.debounceUpdate>-1&&clearTimeout(this.debounceUpdate),this.debounceUpdate=e.active.some(i=>i.state==1&&!this.running.some(o=>o.active.source==i.source))?setTimeout(()=>this.startUpdate(),nn):-1,this.composing!=0)for(let i of t.transactions)bt(i)=="input"?this.composing=2:this.composing==2&&i.selection&&(this.composing=3)}startUpdate(){this.debounceUpdate=-1;let{state:t}=this.view,e=t.field(I);for(let n of e.active)n.state==1&&!this.running.some(i=>i.active.source==n.source)&&this.startQuery(n)}startQuery(t){let{state:e}=this.view,n=Q(e),i=new gi(e,n,t.explicitPos==n),o=new es(t,i);this.running.push(o),Promise.resolve(t.source(i)).then(r=>{o.context.aborted||(o.done=r||null,this.scheduleAccept())},r=>{this.view.dispatch({effects:ve.of(null)}),ut(this.view.state,r)})}scheduleAccept(){this.running.every(t=>t.done!==void 0)?this.accept():this.debounceAccept<0&&(this.debounceAccept=setTimeout(()=>this.accept(),nn))}accept(){var t;this.debounceAccept>-1&&clearTimeout(this.debounceAccept),this.debounceAccept=-1;let e=[],n=this.view.state.facet(B);for(let i=0;i<this.running.length;i++){let o=this.running[i];if(o.done===void 0)continue;if(this.running.splice(i--,1),o.done){let s=new fe(o.active.source,o.active.explicitPos,o.done,o.done.from,(t=o.done.to)!==null&&t!==void 0?t:Q(o.updates.length?o.updates[0].startState:this.view.state));for(let l of o.updates)s=s.update(l,n);if(s.hasResult()){e.push(s);continue}}let r=this.view.state.field(I).active.find(s=>s.source==o.active.source);if(r&&r.state==1)if(o.done==null){let s=new L(o.active.source,0);for(let l of o.updates)s=s.update(l,n);s.state!=1&&e.push(s)}else this.startQuery(r)}e.length&&this.view.dispatch({effects:Si.of(e)})}},{eventHandlers:{blur(t){let e=this.view.state.field(I,!1);if(e&&e.tooltip&&this.view.state.facet(B).closeOnBlur){let n=e.open&&vn(this.view,e.open.tooltip);(!n||!n.dom.contains(t.relatedTarget))&&this.view.dispatch({effects:ve.of(null)})}},compositionstart(){this.composing=1},compositionend(){this.composing==3&&setTimeout(()=>this.view.dispatch({effects:Ot.of(!1)}),20),this.composing=0}}});function bi(t,e){const n=e.completion.apply||e.completion.label;let i=t.state.field(I).active.find(o=>o.source==e.source);return i instanceof fe?(typeof n=="string"?t.dispatch(Object.assign(Object.assign({},Gr(t.state,n,i.from,i.to)),{annotations:xi.of(e.completion)})):n(t,e.completion,i.from,i.to),!0):!1}function os(t){let e=t.addToOptions.slice();return t.icons&&e.push({render(n){let i=document.createElement("div");return i.classList.add("cm-completionIcon"),n.type&&i.classList.add(...n.type.split(/\s+/g).map(o=>"cm-completionIcon-"+o)),i.setAttribute("aria-hidden","true"),i},position:20}),e.push({render(n,i,o){let r=document.createElement("span");r.className="cm-completionLabel";let{label:s}=n,l=0;for(let a=1;a<o.length;){let c=o[a++],f=o[a++];c>l&&r.appendChild(document.createTextNode(s.slice(l,c)));let h=r.appendChild(document.createElement("span"));h.appendChild(document.createTextNode(s.slice(c,f))),h.className="cm-completionMatchedText",l=f}return l<s.length&&r.appendChild(document.createTextNode(s.slice(l))),r},position:50},{render(n){if(!n.detail)return null;let i=document.createElement("span");return i.className="cm-completionDetail",i.textContent=n.detail,i},position:80}),e.sort((n,i)=>n.position-i.position).map(n=>n.render)}function on(t,e,n){if(t<=n)return{from:0,to:t};if(e<0&&(e=0),e<=t>>1){let o=Math.floor(e/n);return{from:o*n,to:(o+1)*n}}let i=Math.floor((t-e)/n);return{from:t-(i+1)*n,to:t-i*n}}class rs{constructor(e,n){this.view=e,this.stateField=n,this.info=null,this.placeInfoReq={read:()=>this.measureInfo(),write:l=>this.placeInfo(l),key:this},this.space=null,this.currentClass="";let i=e.state.field(n),{options:o,selected:r}=i.open,s=e.state.facet(B);this.optionContent=os(s),this.optionClass=s.optionClass,this.tooltipClass=s.tooltipClass,this.range=on(o.length,r,s.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.updateTooltipClass(e.state),this.dom.addEventListener("mousedown",l=>{for(let a=l.target,c;a&&a!=this.dom;a=a.parentNode)if(a.nodeName=="LI"&&(c=/-(\d+)$/.exec(a.id))&&+c[1]<o.length){bi(e,o[+c[1]]),l.preventDefault();return}}),this.dom.addEventListener("focusout",l=>{let a=e.state.field(this.stateField,!1);a&&a.tooltip&&e.state.facet(B).closeOnBlur&&l.relatedTarget!=e.contentDOM&&e.dispatch({effects:ve.of(null)})}),this.list=this.dom.appendChild(this.createListBox(o,i.id,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfoReq)})}mount(){this.updateSel()}update(e){var n,i,o;let r=e.state.field(this.stateField),s=e.startState.field(this.stateField);this.updateTooltipClass(e.state),r!=s&&(this.updateSel(),((n=r.open)===null||n===void 0?void 0:n.disabled)!=((i=s.open)===null||i===void 0?void 0:i.disabled)&&this.dom.classList.toggle("cm-tooltip-autocomplete-disabled",!!(!((o=r.open)===null||o===void 0)&&o.disabled)))}updateTooltipClass(e){let n=this.tooltipClass(e);if(n!=this.currentClass){for(let i of this.currentClass.split(" "))i&&this.dom.classList.remove(i);for(let i of n.split(" "))i&&this.dom.classList.add(i);this.currentClass=n}}positioned(e){this.space=e,this.info&&this.view.requestMeasure(this.placeInfoReq)}updateSel(){let e=this.view.state.field(this.stateField),n=e.open;if((n.selected>-1&&n.selected<this.range.from||n.selected>=this.range.to)&&(this.range=on(n.options.length,n.selected,this.view.state.facet(B).maxRenderedOptions),this.list.remove(),this.list=this.dom.appendChild(this.createListBox(n.options,e.id,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfoReq)})),this.updateSelectedOption(n.selected)){this.info&&(this.info.remove(),this.info=null);let{completion:i}=n.options[n.selected],{info:o}=i;if(!o)return;let r=typeof o=="string"?document.createTextNode(o):o(i);if(!r)return;"then"in r?r.then(s=>{s&&this.view.state.field(this.stateField,!1)==e&&this.addInfoPane(s)}).catch(s=>ut(this.view.state,s,"completion info")):this.addInfoPane(r)}}addInfoPane(e){let n=this.info=document.createElement("div");n.className="cm-tooltip cm-completionInfo",n.appendChild(e),this.dom.appendChild(n),this.view.requestMeasure(this.placeInfoReq)}updateSelectedOption(e){let n=null;for(let i=this.list.firstChild,o=this.range.from;i;i=i.nextSibling,o++)i.nodeName!="LI"||!i.id?o--:o==e?i.hasAttribute("aria-selected")||(i.setAttribute("aria-selected","true"),n=i):i.hasAttribute("aria-selected")&&i.removeAttribute("aria-selected");return n&&ls(this.list,n),n}measureInfo(){let e=this.dom.querySelector("[aria-selected]");if(!e||!this.info)return null;let n=this.dom.getBoundingClientRect(),i=this.info.getBoundingClientRect(),o=e.getBoundingClientRect(),r=this.space;if(!r){let s=this.dom.ownerDocument.defaultView||window;r={left:0,top:0,right:s.innerWidth,bottom:s.innerHeight}}return o.top>Math.min(r.bottom,n.bottom)-10||o.bottom<Math.max(r.top,n.top)+10?null:this.view.state.facet(B).positionInfo(this.view,n,o,i,r)}placeInfo(e){this.info&&(e?(e.style&&(this.info.style.cssText=e.style),this.info.className="cm-tooltip cm-completionInfo "+(e.class||"")):this.info.style.cssText="top: -1e6px")}createListBox(e,n,i){const o=document.createElement("ul");o.id=n,o.setAttribute("role","listbox"),o.setAttribute("aria-expanded","true"),o.setAttribute("aria-label",this.view.state.phrase("Completions"));let r=null;for(let s=i.from;s<i.to;s++){let{completion:l,match:a}=e[s],{section:c}=l;if(c){let u=typeof c=="string"?c:c.name;if(u!=r&&(s>i.from||i.from==0))if(r=u,typeof c!="string"&&c.header)o.appendChild(c.header(c));else{let p=o.appendChild(document.createElement("completion-section"));p.textContent=u}}const f=o.appendChild(document.createElement("li"));f.id=n+"-"+s,f.setAttribute("role","option");let h=this.optionClass(l);h&&(f.className=h);for(let u of this.optionContent){let p=u(l,this.view.state,a);p&&f.appendChild(p)}}return i.from&&o.classList.add("cm-completionListIncompleteTop"),i.to<e.length&&o.classList.add("cm-completionListIncompleteBottom"),o}}function ss(t){return e=>new rs(e,t)}function ls(t,e){let n=t.getBoundingClientRect(),i=e.getBoundingClientRect();i.top<n.top?t.scrollTop-=n.top-i.top:i.bottom>n.bottom&&(t.scrollTop+=i.bottom-n.bottom)}function rn(t){return(t.boost||0)*100+(t.apply?10:0)+(t.info?5:0)+(t.type?1:0)}function as(t,e){let n=[],i=null,o=a=>{n.push(a);let{section:c}=a.completion;if(c){i||(i=[]);let f=typeof c=="string"?c:c.name;i.some(h=>h.name==f)||i.push(typeof c=="string"?{name:f}:c)}};for(let a of t)if(a.hasResult())if(a.result.filter===!1){let c=a.result.getMatch;for(let f of a.result.options){let h=[1e9-n.length];if(c)for(let u of c(f))h.push(u);o(new Zt(f,a.source,h,h[0]))}}else{let c=new Qr(e.sliceDoc(a.from,a.to)),f;for(let h of a.result.options)(f=c.match(h.label))&&o(new Zt(h,a.source,f,f[0]+(h.boost||0)))}if(i){let a=Object.create(null),c=0,f=(h,u)=>{var p,x;return((p=h.rank)!==null&&p!==void 0?p:1e9)-((x=u.rank)!==null&&x!==void 0?x:1e9)||(h.name<u.name?-1:1)};for(let h of i.sort(f))c-=1e5,a[h.name]=c;for(let h of n){let{section:u}=h.completion;u&&(h.score+=a[typeof u=="string"?u:u.name])}}let r=[],s=null,l=e.facet(B).compareCompletions;for(let a of n.sort((c,f)=>f.score-c.score||l(c.completion,f.completion)))!s||s.label!=a.completion.label||s.detail!=a.completion.detail||s.type!=null&&a.completion.type!=null&&s.type!=a.completion.type||s.apply!=a.completion.apply?r.push(a):rn(a.completion)>rn(s)&&(r[r.length-1]=a),s=a.completion;return r}class ae{constructor(e,n,i,o,r,s){this.options=e,this.attrs=n,this.tooltip=i,this.timestamp=o,this.selected=r,this.disabled=s}setSelected(e,n){return e==this.selected||e>=this.options.length?this:new ae(this.options,sn(n,e),this.tooltip,this.timestamp,e,this.disabled)}static build(e,n,i,o,r){let s=as(e,n);if(!s.length)return o&&e.some(a=>a.state==1)?new ae(o.options,o.attrs,o.tooltip,o.timestamp,o.selected,!0):null;let l=n.facet(B).selectOnOpen?0:-1;if(o&&o.selected!=l&&o.selected!=-1){let a=o.options[o.selected].completion;for(let c=0;c<s.length;c++)if(s[c].completion==a){l=c;break}}return new ae(s,sn(i,l),{pos:e.reduce((a,c)=>c.hasResult()?Math.min(a,c.from):a,1e8),create:ss(I),above:r.aboveCursor},o?o.timestamp:Date.now(),l,!1)}map(e){return new ae(this.options,this.attrs,Object.assign(Object.assign({},this.tooltip),{pos:e.mapPos(this.tooltip.pos)}),this.timestamp,this.selected,this.disabled)}}class ze{constructor(e,n,i){this.active=e,this.id=n,this.open=i}static start(){return new ze(hs,"cm-ac-"+Math.floor(Math.random()*2e6).toString(36),null)}update(e){let{state:n}=e,i=n.facet(B),r=(i.override||n.languageDataAt("autocomplete",Q(n)).map(Jr)).map(l=>(this.active.find(c=>c.source==l)||new L(l,this.active.some(c=>c.state!=0)?1:0)).update(e,i));r.length==this.active.length&&r.every((l,a)=>l==this.active[a])&&(r=this.active);let s=this.open;s&&e.docChanged&&(s=s.map(e.changes)),e.selection||r.some(l=>l.hasResult()&&e.changes.touchesRange(l.from,l.to))||!cs(r,this.active)?s=ae.build(r,n,this.id,s,i):s&&s.disabled&&!r.some(l=>l.state==1)&&(s=null),!s&&r.every(l=>l.state!=1)&&r.some(l=>l.hasResult())&&(r=r.map(l=>l.hasResult()?new L(l.source,0):l));for(let l of e.effects)l.is(ki)&&(s=s&&s.setSelected(l.value,this.id));return r==this.active&&s==this.open?this:new ze(r,this.id,s)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:fs}}function cs(t,e){if(t==e)return!0;for(let n=0,i=0;;){for(;n<t.length&&!t[n].hasResult;)n++;for(;i<e.length&&!e[i].hasResult;)i++;let o=n==t.length,r=i==e.length;if(o||r)return o==r;if(t[n++].result!=e[i++].result)return!1}}const fs={"aria-autocomplete":"list"};function sn(t,e){let n={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":t};return e>-1&&(n["aria-activedescendant"]=t+"-"+e),n}const hs=[];function bt(t){return t.isUserEvent("input.type")?"input":t.isUserEvent("delete.backward")?"delete":null}class L{constructor(e,n,i=-1){this.source=e,this.state=n,this.explicitPos=i}hasResult(){return!1}update(e,n){let i=bt(e),o=this;i?o=o.handleUserEvent(e,i,n):e.docChanged?o=o.handleChange(e):e.selection&&o.state!=0&&(o=new L(o.source,0));for(let r of e.effects)if(r.is(Ot))o=new L(o.source,1,r.value?Q(e.state):-1);else if(r.is(ve))o=new L(o.source,0);else if(r.is(Si))for(let s of r.value)s.source==o.source&&(o=s);return o}handleUserEvent(e,n,i){return n=="delete"||!i.activateOnTyping?this.map(e.changes):new L(this.source,1)}handleChange(e){return e.changes.touchesRange(Q(e.startState))?new L(this.source,0):this.map(e.changes)}map(e){return e.empty||this.explicitPos<0?this:new L(this.source,this.state,e.mapPos(this.explicitPos))}}class fe extends L{constructor(e,n,i,o,r){super(e,2,n),this.result=i,this.from=o,this.to=r}hasResult(){return!0}handleUserEvent(e,n,i){var o;let r=e.changes.mapPos(this.from),s=e.changes.mapPos(this.to,1),l=Q(e.state);if((this.explicitPos<0?l<=r:l<this.from)||l>s||n=="delete"&&Q(e.startState)==this.from)return new L(this.source,n=="input"&&i.activateOnTyping?1:0);let a=this.explicitPos<0?-1:e.changes.mapPos(this.explicitPos),c;return us(this.result.validFor,e.state,r,s)?new fe(this.source,a,this.result,r,s):this.result.update&&(c=this.result.update(this.result,r,s,new gi(e.state,l,a>=0)))?new fe(this.source,a,c,c.from,(o=c.to)!==null&&o!==void 0?o:Q(e.state)):new L(this.source,1,a)}handleChange(e){return e.changes.touchesRange(this.from,this.to)?new L(this.source,0):this.map(e.changes)}map(e){return e.empty?this:new fe(this.source,this.explicitPos<0?-1:e.mapPos(this.explicitPos),this.result,e.mapPos(this.from),e.mapPos(this.to,1))}}function us(t,e,n,i){if(!t)return!1;let o=e.sliceDoc(n,i);return typeof t=="function"?t(o,n,i,e):yi(t,!0).test(o)}const Si=k.define({map(t,e){return t.map(n=>n.map(e))}}),ki=k.define(),I=ee.define({create(){return ze.start()},update(t,e){return t.update(e)},provide:t=>[zi.from(t,e=>e.tooltip),g.contentAttributes.from(t,e=>e.attrs)]}),Ci=g.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",height:"100%",listStyle:"none",margin:0,padding:0,"& > li, & > completion-section":{padding:"1px 3px",lineHeight:1.2},"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer"},"& > completion-section":{display:"list-item",borderBottom:"1px solid silver",paddingLeft:"0.5em",opacity:.7}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&light .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#777"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},"&dark .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#444"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'"Â·Â·Â·"',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:"400px",boxSizing:"border-box"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},".cm-completionInfo.cm-completionInfo-left-narrow":{right:"30px"},".cm-completionInfo.cm-completionInfo-right-narrow":{left:"30px"},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",display:"inline-block",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6",boxSizing:"content-box"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"'Æ’'"}},".cm-completionIcon-class":{"&:after":{content:"'â—‹'"}},".cm-completionIcon-interface":{"&:after":{content:"'â—Œ'"}},".cm-completionIcon-variable":{"&:after":{content:"'ð‘¥'"}},".cm-completionIcon-constant":{"&:after":{content:"'ð¶'"}},".cm-completionIcon-type":{"&:after":{content:"'ð‘¡'"}},".cm-completionIcon-enum":{"&:after":{content:"'âˆª'"}},".cm-completionIcon-property":{"&:after":{content:"'â–¡'"}},".cm-completionIcon-keyword":{"&:after":{content:"'ðŸ”‘ï¸Ž'"}},".cm-completionIcon-namespace":{"&:after":{content:"'â–¢'"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}});class ds{constructor(e,n,i,o){this.field=e,this.line=n,this.from=i,this.to=o}}class Pt{constructor(e,n,i){this.field=e,this.from=n,this.to=i}map(e){let n=e.mapPos(this.from,-1,ht.TrackDel),i=e.mapPos(this.to,1,ht.TrackDel);return n==null||i==null?null:new Pt(this.field,n,i)}}class Wt{constructor(e,n){this.lines=e,this.fieldPositions=n}instantiate(e,n){let i=[],o=[n],r=e.doc.lineAt(n),s=/^\s*/.exec(r.text)[0];for(let a of this.lines){if(i.length){let c=s,f=/^\t*/.exec(a)[0].length;for(let h=0;h<f;h++)c+=e.facet(Ct);o.push(n+c.length-f),a=c+a.slice(f)}i.push(a),n+=a.length+1}let l=this.fieldPositions.map(a=>new Pt(a.field,o[a.line]+a.from,o[a.line]+a.to));return{text:i,ranges:l}}static parse(e){let n=[],i=[],o=[],r;for(let s of e.split(/\r\n?|\n/)){for(;r=/[#$]\{(?:(\d+)(?::([^}]*))?|([^}]*))\}/.exec(s);){let l=r[1]?+r[1]:null,a=r[2]||r[3]||"",c=-1;for(let f=0;f<n.length;f++)(l!=null?n[f].seq==l:a&&n[f].name==a)&&(c=f);if(c<0){let f=0;for(;f<n.length&&(l==null||n[f].seq!=null&&n[f].seq<l);)f++;n.splice(f,0,{seq:l,name:a}),c=f;for(let h of o)h.field>=c&&h.field++}o.push(new ds(c,i.length,r.index,r.index+a.length)),s=s.slice(0,r.index)+a+s.slice(r.index+r[0].length)}for(let l;l=/\\([{}])/.exec(s);){s=s.slice(0,l.index)+l[1]+s.slice(l.index+l[0].length);for(let a of o)a.line==i.length&&a.from>l.index&&(a.from--,a.to--)}i.push(s)}return new Wt(i,o)}}let ms=b.widget({widget:new class extends An{toDOM(){let t=document.createElement("span");return t.className="cm-snippetFieldPosition",t}ignoreEvent(){return!1}}}),ps=b.mark({class:"cm-snippetField"});class ge{constructor(e,n){this.ranges=e,this.active=n,this.deco=b.set(e.map(i=>(i.from==i.to?ms:ps).range(i.from,i.to)))}map(e){let n=[];for(let i of this.ranges){let o=i.map(e);if(!o)return null;n.push(o)}return new ge(n,this.active)}selectionInsideField(e){return e.ranges.every(n=>this.ranges.some(i=>i.field==this.active&&i.from<=n.from&&i.to>=n.to))}}const De=k.define({map(t,e){return t&&t.map(e)}}),gs=k.define(),Ae=ee.define({create(){return null},update(t,e){for(let n of e.effects){if(n.is(De))return n.value;if(n.is(gs)&&t)return new ge(t.ranges,n.value)}return t&&e.docChanged&&(t=t.map(e.changes)),t&&e.selection&&!t.selectionInsideField(e.selection)&&(t=null),t},provide:t=>g.decorations.from(t,e=>e?e.deco:b.none)});function Ft(t,e){return d.create(t.filter(n=>n.field==e).map(n=>d.range(n.from,n.to)))}function ys(t){let e=Wt.parse(t);return(n,i,o,r)=>{let{text:s,ranges:l}=e.instantiate(n.state,o),a={changes:{from:o,to:r,insert:kt.of(s)},scrollIntoView:!0,annotations:i?xi.of(i):void 0};if(l.length&&(a.selection=Ft(l,0)),l.length>1){let c=new ge(l,0),f=a.effects=[De.of(c)];n.state.field(Ae,!1)===void 0&&f.push(k.appendConfig.of([Ae,Cs,vs,Ci]))}n.dispatch(n.state.update(a))}}function vi(t){return({state:e,dispatch:n})=>{let i=e.field(Ae,!1);if(!i||t<0&&i.active==0)return!1;let o=i.active+t,r=t>0&&!i.ranges.some(s=>s.field==o+t);return n(e.update({selection:Ft(i.ranges,o),effects:De.of(r?null:new ge(i.ranges,o))})),!0}}const xs=({state:t,dispatch:e})=>t.field(Ae,!1)?(e(t.update({effects:De.of(null)})),!0):!1,bs=vi(1),Ss=vi(-1),ks=[{key:"Tab",run:bs,shift:Ss},{key:"Escape",run:xs}],ln=Z.define({combine(t){return t.length?t[0]:ks}}),Cs=Mt.highest(Ke.compute([ln],t=>t.facet(ln)));function gl(t,e){return Object.assign(Object.assign({},e),{apply:ys(t)})}const vs=g.domEventHandlers({mousedown(t,e){let n=e.state.field(Ae,!1),i;if(!n||(i=e.posAtCoords({x:t.clientX,y:t.clientY}))==null)return!1;let o=n.ranges.find(r=>r.from<=i&&r.to>=i);return!o||o.field==n.active?!1:(e.dispatch({selection:Ft(n.ranges,o.field),effects:De.of(n.ranges.some(r=>r.field>o.field)?new ge(n.ranges,o.field):null)}),!0)}}),Me={brackets:["(","[","{","'",'"'],before:")]}:;>",stringPrefixes:[]},Y=k.define({map(t,e){let n=e.mapPos(t,-1,ht.TrackAfter);return n??void 0}}),Nt=new class extends Vi{};Nt.startSide=1;Nt.endSide=-1;const Ai=ee.define({create(){return qt.empty},update(t,e){if(e.selection){let n=e.state.doc.lineAt(e.selection.main.head).from,i=e.startState.doc.lineAt(e.startState.selection.main.head).from;n!=e.changes.mapPos(i,-1)&&(t=qt.empty)}t=t.map(e.changes);for(let n of e.effects)n.is(Y)&&(t=t.update({add:[Nt.range(n.value,n.value+1)]}));return t}});function As(){return[ws,Ai]}const st="()[]{}<>";function Mi(t){for(let e=0;e<st.length;e+=2)if(st.charCodeAt(e)==t)return st.charAt(e+1);return At(t<128?t:t+1)}function wi(t,e){return t.languageDataAt("closeBrackets",e)[0]||Me}const Ms=typeof navigator=="object"&&/Android\b/.test(navigator.userAgent),ws=g.inputHandler.of((t,e,n,i)=>{if((Ms?t.composing:t.compositionStarted)||t.state.readOnly)return!1;let o=t.state.selection.main;if(i.length>2||i.length==2&&K(P(i,0))==1||e!=o.from||n!=o.to)return!1;let r=Bs(t.state,i);return r?(t.dispatch(r),!0):!1}),Ls=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let i=wi(t,t.selection.main.head).brackets||Me.brackets,o=null,r=t.changeByRange(s=>{if(s.empty){let l=Es(t.doc,s.head);for(let a of i)if(a==l&&Ye(t.doc,s.head)==Mi(P(a,0)))return{changes:{from:s.head-a.length,to:s.head+a.length},range:d.cursor(s.head-a.length)}}return{range:o=s}});return o||e(t.update(r,{scrollIntoView:!0,userEvent:"delete.backward"})),!o},Ds=[{key:"Backspace",run:Ls}];function Bs(t,e){let n=wi(t,t.selection.main.head),i=n.brackets||Me.brackets;for(let o of i){let r=Mi(P(o,0));if(e==o)return r==o?Rs(t,o,i.indexOf(o+o+o)>-1,n):Is(t,o,r,n.before||Me.before);if(e==r&&Li(t,t.selection.main.from))return Ts(t,o,r)}return null}function Li(t,e){let n=!1;return t.field(Ai).between(0,t.doc.length,i=>{i==e&&(n=!0)}),n}function Ye(t,e){let n=t.sliceString(e,e+2);return n.slice(0,K(P(n,0)))}function Es(t,e){let n=t.sliceString(e-2,e);return K(P(n,0))==n.length?n:n.slice(1)}function Is(t,e,n,i){let o=null,r=t.changeByRange(s=>{if(!s.empty)return{changes:[{insert:e,from:s.from},{insert:n,from:s.to}],effects:Y.of(s.to+e.length),range:d.range(s.anchor+e.length,s.head+e.length)};let l=Ye(t.doc,s.head);return!l||/\s/.test(l)||i.indexOf(l)>-1?{changes:{insert:e+n,from:s.head},effects:Y.of(s.head+e.length),range:d.cursor(s.head+e.length)}:{range:o=s}});return o?null:t.update(r,{scrollIntoView:!0,userEvent:"input.type"})}function Ts(t,e,n){let i=null,o=t.changeByRange(r=>r.empty&&Ye(t.doc,r.head)==n?{changes:{from:r.head,to:r.head+n.length,insert:n},range:d.cursor(r.head+n.length)}:i={range:r});return i?null:t.update(o,{scrollIntoView:!0,userEvent:"input.type"})}function Rs(t,e,n,i){let o=i.stringPrefixes||Me.stringPrefixes,r=null,s=t.changeByRange(l=>{if(!l.empty)return{changes:[{insert:e,from:l.from},{insert:e,from:l.to}],effects:Y.of(l.to+e.length),range:d.range(l.anchor+e.length,l.head+e.length)};let a=l.head,c=Ye(t.doc,a),f;if(c==e){if(an(t,a))return{changes:{insert:e+e,from:a},effects:Y.of(a+e.length),range:d.cursor(a+e.length)};if(Li(t,a)){let u=n&&t.sliceDoc(a,a+e.length*3)==e+e+e?e+e+e:e;return{changes:{from:a,to:a+u.length,insert:u},range:d.cursor(a+u.length)}}}else{if(n&&t.sliceDoc(a-2*e.length,a)==e+e&&(f=cn(t,a-2*e.length,o))>-1&&an(t,f))return{changes:{insert:e+e+e+e,from:a},effects:Y.of(a+e.length),range:d.cursor(a+e.length)};if(t.charCategorizer(a)(c)!=M.Word&&cn(t,a,o)>-1&&!Os(t,a,e,o))return{changes:{insert:e+e,from:a},effects:Y.of(a+e.length),range:d.cursor(a+e.length)}}return{range:r=l}});return r?null:t.update(s,{scrollIntoView:!0,userEvent:"input.type"})}function an(t,e){let n=te(t).resolveInner(e+1);return n.parent&&n.from==e}function Os(t,e,n,i){let o=te(t).resolveInner(e,-1),r=i.reduce((s,l)=>Math.max(s,l.length),0);for(let s=0;s<5;s++){let l=t.sliceDoc(o.from,Math.min(o.to,o.from+n.length+r)),a=l.indexOf(n);if(!a||a>-1&&i.indexOf(l.slice(0,a))>-1){let f=o.firstChild;for(;f&&f.from==o.from&&f.to-f.from>n.length+a;){if(t.sliceDoc(f.to-n.length,f.to)==n)return!1;f=f.firstChild}return!0}let c=o.to==e&&o.parent;if(!c)break;o=c}return!1}function cn(t,e,n){let i=t.charCategorizer(e);if(i(t.sliceDoc(e-1,e))!=M.Word)return e;for(let o of n){let r=e-o.length;if(t.sliceDoc(r,e)==o&&i(t.sliceDoc(r-1,r))!=M.Word)return r}return-1}function Ps(t={}){return[I,B.of(t),is,Ws,Ci]}const Di=[{key:"Ctrl-Space",run:Yr},{key:"Escape",run:Zr},{key:"ArrowDown",run:Oe(!0)},{key:"ArrowUp",run:Oe(!1)},{key:"PageDown",run:Oe(!0,"page")},{key:"PageUp",run:Oe(!1,"page")},{key:"Enter",run:Xr}],Ws=Mt.highest(Ke.computeN([B],t=>t.facet(B).defaultKeymap?[Di]:[]));class Fs{constructor(e,n,i){this.from=e,this.to=n,this.diagnostic=i}}class X{constructor(e,n,i){this.diagnostics=e,this.panel=n,this.selected=i}static init(e,n,i){let o=e,r=i.facet(Ii).markerFilter;r&&(o=r(o));let s=b.set(o.map(l=>l.from==l.to||l.from==l.to-1&&i.doc.lineAt(l.from).to==l.from?b.widget({widget:new Ks(l),diagnostic:l}).range(l.from):b.mark({attributes:{class:"cm-lintRange cm-lintRange-"+l.severity},diagnostic:l}).range(l.from,l.to)),!0);return new X(s,n,de(s))}}function de(t,e=null,n=0){let i=null;return t.between(n,1e9,(o,r,{spec:s})=>{if(!(e&&s.diagnostic!=e))return i=new Fs(o,r,s.diagnostic),!1}),i}function Ns(t,e){let n=t.startState.doc.lineAt(e.pos);return!!(t.effects.some(i=>i.is(Bi))||t.changes.touchesRange(n.from,n.to))}function $s(t,e){return t.field(T,!1)?e:e.concat(k.appendConfig.of(Qs))}const Bi=k.define(),$t=k.define(),Ei=k.define(),T=ee.define({create(){return new X(b.none,null,null)},update(t,e){if(e.docChanged){let n=t.diagnostics.map(e.changes),i=null;if(t.selected){let o=e.changes.mapPos(t.selected.from,1);i=de(n,t.selected.diagnostic,o)||de(n,null,o)}t=new X(n,t.panel,i)}for(let n of e.effects)n.is(Bi)?t=X.init(n.value,t.panel,e.state):n.is($t)?t=new X(t.diagnostics,n.value?Ze.open:null,t.selected):n.is(Ei)&&(t=new X(t.diagnostics,t.panel,n.value));return t},provide:t=>[wt.from(t,e=>e.panel),g.decorations.from(t,e=>e.diagnostics)]}),qs=b.mark({class:"cm-lintRange cm-lintRange-active"});function Us(t,e,n){let{diagnostics:i}=t.state.field(T),o=[],r=2e8,s=0;i.between(e-(n<0?1:0),e+(n>0?1:0),(a,c,{spec:f})=>{e>=a&&e<=c&&(a==c||(e>a||n>0)&&(e<c||n<0))&&(o.push(f.diagnostic),r=Math.min(a,r),s=Math.max(c,s))});let l=t.state.facet(Ii).tooltipFilter;return l&&(o=l(o)),o.length?{pos:r,end:s,above:t.state.doc.lineAt(r).to<s,create(){return{dom:Hs(t,o)}}}:null}function Hs(t,e){return y("ul",{class:"cm-tooltip-lint"},e.map(n=>Ri(t,n,!1)))}const Vs=t=>{let e=t.state.field(T,!1);(!e||!e.panel)&&t.dispatch({effects:$s(t.state,[$t.of(!0)])});let n=Se(t,Ze.open);return n&&n.dom.querySelector(".cm-panel-lint ul").focus(),!0},fn=t=>{let e=t.state.field(T,!1);return!e||!e.panel?!1:(t.dispatch({effects:$t.of(!1)}),!0)},zs=t=>{let e=t.state.field(T,!1);if(!e)return!1;let n=t.state.selection.main,i=e.diagnostics.iter(n.to+1);return!i.value&&(i=e.diagnostics.iter(0),!i.value||i.from==n.from&&i.to==n.to)?!1:(t.dispatch({selection:{anchor:i.from,head:i.to},scrollIntoView:!0}),!0)},js=[{key:"Mod-Shift-m",run:Vs,preventDefault:!0},{key:"F8",run:zs}],Ii=Z.define({combine(t){return Object.assign({sources:t.map(e=>e.source)},we(t.map(e=>e.config),{delay:750,markerFilter:null,tooltipFilter:null,needsRefresh:null},{needsRefresh:(e,n)=>e?n?i=>e(i)||n(i):e:n}))}});function Ti(t){let e=[];if(t)e:for(let{name:n}of t){for(let i=0;i<n.length;i++){let o=n[i];if(/[a-zA-Z]/.test(o)&&!e.some(r=>r.toLowerCase()==o.toLowerCase())){e.push(o);continue e}}e.push("")}return e}function Ri(t,e,n){var i;let o=n?Ti(e.actions):[];return y("li",{class:"cm-diagnostic cm-diagnostic-"+e.severity},y("span",{class:"cm-diagnosticText"},e.renderMessage?e.renderMessage():e.message),(i=e.actions)===null||i===void 0?void 0:i.map((r,s)=>{let l=!1,a=u=>{if(u.preventDefault(),l)return;l=!0;let p=de(t.state.field(T).diagnostics,e);p&&r.apply(t,p.from,p.to)},{name:c}=r,f=o[s]?c.indexOf(o[s]):-1,h=f<0?c:[c.slice(0,f),y("u",c.slice(f,f+1)),c.slice(f+1)];return y("button",{type:"button",class:"cm-diagnosticAction",onclick:a,onmousedown:a,"aria-label":` Action: ${c}${f<0?"":` (access key "${o[s]})"`}.`},h)}),e.source&&y("div",{class:"cm-diagnosticSource"},e.source))}class Ks extends An{constructor(e){super(),this.diagnostic=e}eq(e){return e.diagnostic==this.diagnostic}toDOM(){return y("span",{class:"cm-lintPoint cm-lintPoint-"+this.diagnostic.severity})}}class hn{constructor(e,n){this.diagnostic=n,this.id="item_"+Math.floor(Math.random()*4294967295).toString(16),this.dom=Ri(e,n,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}}class Ze{constructor(e){this.view=e,this.items=[];let n=o=>{if(o.keyCode==27)fn(this.view),this.view.focus();else if(o.keyCode==38||o.keyCode==33)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if(o.keyCode==40||o.keyCode==34)this.moveSelection((this.selectedIndex+1)%this.items.length);else if(o.keyCode==36)this.moveSelection(0);else if(o.keyCode==35)this.moveSelection(this.items.length-1);else if(o.keyCode==13)this.view.focus();else if(o.keyCode>=65&&o.keyCode<=90&&this.selectedIndex>=0){let{diagnostic:r}=this.items[this.selectedIndex],s=Ti(r.actions);for(let l=0;l<s.length;l++)if(s[l].toUpperCase().charCodeAt(0)==o.keyCode){let a=de(this.view.state.field(T).diagnostics,r);a&&r.actions[l].apply(e,a.from,a.to)}}else return;o.preventDefault()},i=o=>{for(let r=0;r<this.items.length;r++)this.items[r].dom.contains(o.target)&&this.moveSelection(r)};this.list=y("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:n,onclick:i}),this.dom=y("div",{class:"cm-panel-lint"},this.list,y("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>fn(this.view)},"Ã—")),this.update()}get selectedIndex(){let e=this.view.state.field(T).selected;if(!e)return-1;for(let n=0;n<this.items.length;n++)if(this.items[n].diagnostic==e.diagnostic)return n;return-1}update(){let{diagnostics:e,selected:n}=this.view.state.field(T),i=0,o=!1,r=null;for(e.between(0,this.view.state.doc.length,(s,l,{spec:a})=>{let c=-1,f;for(let h=i;h<this.items.length;h++)if(this.items[h].diagnostic==a.diagnostic){c=h;break}c<0?(f=new hn(this.view,a.diagnostic),this.items.splice(i,0,f),o=!0):(f=this.items[c],c>i&&(this.items.splice(i,c-i),o=!0)),n&&f.diagnostic==n.diagnostic?f.dom.hasAttribute("aria-selected")||(f.dom.setAttribute("aria-selected","true"),r=f):f.dom.hasAttribute("aria-selected")&&f.dom.removeAttribute("aria-selected"),i++});i<this.items.length&&!(this.items.length==1&&this.items[0].diagnostic.from<0);)o=!0,this.items.pop();this.items.length==0&&(this.items.push(new hn(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),o=!0),r?(this.list.setAttribute("aria-activedescendant",r.id),this.view.requestMeasure({key:this,read:()=>({sel:r.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:({sel:s,panel:l})=>{s.top<l.top?this.list.scrollTop-=l.top-s.top:s.bottom>l.bottom&&(this.list.scrollTop+=s.bottom-l.bottom)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),o&&this.sync()}sync(){let e=this.list.firstChild;function n(){let i=e;e=i.nextSibling,i.remove()}for(let i of this.items)if(i.dom.parentNode==this.list){for(;e!=i.dom;)n();e=i.dom.nextSibling}else this.list.insertBefore(i.dom,e);for(;e;)n()}moveSelection(e){if(this.selectedIndex<0)return;let n=this.view.state.field(T),i=de(n.diagnostics,this.items[e].diagnostic);i&&this.view.dispatch({selection:{anchor:i.from,head:i.to},scrollIntoView:!0,effects:Ei.of(i)})}static open(e){return new Ze(e)}}function Gs(t,e='viewBox="0 0 40 40"'){return`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${e}>${encodeURIComponent(t)}</svg>')`}function lt(t){return Gs(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${t}" fill="none" stroke-width=".7"/>`,'width="6" height="3"')}const Js=g.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px",cursor:"pointer"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:lt("#d11")},".cm-lintRange-warning":{backgroundImage:lt("orange")},".cm-lintRange-info":{backgroundImage:lt("#999")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}}),Qs=[T,g.decorations.compute([T],t=>{let{selected:e,panel:n}=t.field(T);return!e||!n||e.from==e.to?b.none:b.set([qs.range(e.from,e.to)])}),ji(Us,{hideOn:Ns}),Js];var un=function(e){e===void 0&&(e={});var n=[];e.closeBracketsKeymap!==!1&&(n=n.concat(Ds)),e.defaultKeymap!==!1&&(n=n.concat(gr)),e.searchKeymap!==!1&&(n=n.concat(Ur)),e.historyKeymap!==!1&&(n=n.concat(Lo)),e.foldKeymap!==!1&&(n=n.concat(Ki)),e.completionKeymap!==!1&&(n=n.concat(Di)),e.lintKeymap!==!1&&(n=n.concat(js));var i=[];return e.lineNumbers!==!1&&i.push(Gi()),e.highlightActiveLineGutter!==!1&&i.push(Ji()),e.highlightSpecialChars!==!1&&i.push(Qi()),e.history!==!1&&i.push(xo()),e.foldGutter!==!1&&i.push(_i()),e.drawSelection!==!1&&i.push(Xi()),e.dropCursor!==!1&&i.push(Yi()),e.allowMultipleSelections!==!1&&i.push(ke.allowMultipleSelections.of(!0)),e.indentOnInput!==!1&&i.push(Zi()),e.syntaxHighlighting!==!1&&i.push(Mn(eo,{fallback:!0})),e.bracketMatching!==!1&&i.push(to()),e.closeBrackets!==!1&&i.push(As()),e.autocompletion!==!1&&i.push(Ps()),e.rectangularSelection!==!1&&i.push(no()),e.crosshairCursor!==!1&&i.push(io()),e.highlightActiveLine!==!1&&i.push(oo()),e.highlightSelectionMatches!==!1&&i.push(Cr()),e.tabSize&&typeof e.tabSize=="number"&&i.push(Ct.of(" ".repeat(e.tabSize))),i.concat([Ke.of(n.flat())]).filter(Boolean)};const _s="#e5c07b",dn="#e06c75",Xs="#56b6c2",Ys="#ffffff",Pe="#abb2bf",St="#7d8799",Zs="#61afef",el="#98c379",mn="#d19a66",tl="#c678dd",nl="#21252b",pn="#2c313a",gn="#282c34",at="#353a42",il="#3E4451",yn="#528bff",ol=g.theme({"&":{color:Pe,backgroundColor:gn},".cm-content":{caretColor:yn},".cm-cursor, .cm-dropCursor":{borderLeftColor:yn},"&.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection":{backgroundColor:il},".cm-panels":{backgroundColor:nl,color:Pe},".cm-panels.cm-panels-top":{borderBottom:"2px solid black"},".cm-panels.cm-panels-bottom":{borderTop:"2px solid black"},".cm-searchMatch":{backgroundColor:"#72a1ff59",outline:"1px solid #457dff"},".cm-searchMatch.cm-searchMatch-selected":{backgroundColor:"#6199ff2f"},".cm-activeLine":{backgroundColor:"#6699ff0b"},".cm-selectionMatch":{backgroundColor:"#aafe661a"},"&.cm-focused .cm-matchingBracket, &.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bad0f847"},".cm-gutters":{backgroundColor:gn,color:St,border:"none"},".cm-activeLineGutter":{backgroundColor:pn},".cm-foldPlaceholder":{backgroundColor:"transparent",border:"none",color:"#ddd"},".cm-tooltip":{border:"none",backgroundColor:at},".cm-tooltip .cm-tooltip-arrow:before":{borderTopColor:"transparent",borderBottomColor:"transparent"},".cm-tooltip .cm-tooltip-arrow:after":{borderTopColor:at,borderBottomColor:at},".cm-tooltip-autocomplete":{"& > ul > li[aria-selected]":{backgroundColor:pn,color:Pe}}},{dark:!0}),rl=ro.define([{tag:m.keyword,color:tl},{tag:[m.name,m.deleted,m.character,m.propertyName,m.macroName],color:dn},{tag:[m.function(m.variableName),m.labelName],color:Zs},{tag:[m.color,m.constant(m.name),m.standard(m.name)],color:mn},{tag:[m.definition(m.name),m.separator],color:Pe},{tag:[m.typeName,m.className,m.number,m.changed,m.annotation,m.modifier,m.self,m.namespace],color:_s},{tag:[m.operator,m.operatorKeyword,m.url,m.escape,m.regexp,m.link,m.special(m.string)],color:Xs},{tag:[m.meta,m.comment],color:St},{tag:m.strong,fontWeight:"bold"},{tag:m.emphasis,fontStyle:"italic"},{tag:m.strikethrough,textDecoration:"line-through"},{tag:m.link,color:St,textDecoration:"underline"},{tag:m.heading,fontWeight:"bold",color:dn},{tag:[m.atom,m.bool,m.special(m.variableName)],color:mn},{tag:[m.processingInstruction,m.string,m.inserted],color:el},{tag:m.invalid,color:Ys}]),sl=[ol,Mn(rl)];var ll=g.theme({"&":{backgroundColor:"#fff"}},{dark:!1}),al=function(e){e===void 0&&(e={});var{indentWithTab:n=!0,editable:i=!0,readOnly:o=!1,theme:r="light",placeholder:s="",basicSetup:l=!0}=e,a=[];switch(n&&a.unshift(Ke.of([yr])),l&&(typeof l=="boolean"?a.unshift(un()):a.unshift(un(l))),s&&a.unshift(so(s)),r){case"light":a.push(ll);break;case"dark":a.push(sl);break;case"none":break;default:a.push(r);break}return i===!1&&a.push(g.editable.of(!1)),o&&a.push(ke.readOnly.of(!0)),[...a]},cl=t=>({line:t.state.doc.lineAt(t.state.selection.main.from),lineCount:t.state.doc.lines,lineBreak:t.state.lineBreak,length:t.state.doc.length,readOnly:t.state.readOnly,tabSize:t.state.tabSize,selection:t.state.selection,selectionAsSingle:t.state.selection.asSingle().main,ranges:t.state.selection.ranges,selectionCode:t.state.sliceDoc(t.state.selection.main.from,t.state.selection.main.to),selections:t.state.selection.ranges.map(e=>t.state.sliceDoc(e.from,e.to)),selectedText:t.state.selection.ranges.some(e=>!e.empty)}),xn=je.define();function fl(t){var{value:e,selection:n,onChange:i,onStatistics:o,onCreateEditor:r,onUpdate:s,extensions:l=[],autoFocus:a,theme:c="light",height:f="",minHeight:h="",maxHeight:u="",placeholder:p="",width:x="",minWidth:R="",maxWidth:ne="",editable:G=!0,readOnly:S=!1,indentWithTab:N=!0,basicSetup:w=!0,root:C,initialState:U}=t,[H,Be]=O.useState(),[v,j]=O.useState(),[ie,oe]=O.useState(),et=g.theme({"&":{height:f,minHeight:h,maxHeight:u,width:x,minWidth:R,maxWidth:ne}}),tt=g.updateListener.of($=>{if($.docChanged&&typeof i=="function"&&!$.transactions.some(Pi=>Pi.annotation(xn))){var xe=$.state.doc,Ee=xe.toString();i(Ee,$)}o&&o(cl($))}),Oi=al({theme:c,editable:G,readOnly:S,placeholder:p,indentWithTab:N,basicSetup:w}),ye=[tt,et,...Oi];return s&&typeof s=="function"&&ye.push(g.updateListener.of(s)),ye=ye.concat(l),O.useEffect(()=>{if(H&&!ie){var $={doc:e,selection:n,extensions:ye},xe=U?ke.fromJSON(U.json,$,U.fields):ke.create($);if(oe(xe),!v){var Ee=new g({state:xe,parent:H,root:C});j(Ee),r&&r(Ee,xe)}}return()=>{v&&(oe(void 0),j(void 0))}},[H,ie]),O.useEffect(()=>Be(t.container),[t.container]),O.useEffect(()=>()=>{v&&(v.destroy(),j(void 0))},[v]),O.useEffect(()=>{a&&v&&v.focus()},[a,v]),O.useEffect(()=>{v&&v.dispatch({effects:k.reconfigure.of(ye)})},[c,l,f,h,u,x,R,ne,p,G,S,N,w,i,s]),O.useEffect(()=>{if(e!==void 0){var $=v?v.state.doc.toString():"";v&&e!==$&&v.dispatch({changes:{from:0,to:$.length,insert:e||""},annotations:[xn.of(!0)]})}},[e,v]),{state:ie,setState:oe,view:v,setView:j,container:H,setContainer:Be}}var hl=["className","value","selection","extensions","onChange","onStatistics","onCreateEditor","onUpdate","autoFocus","theme","height","minHeight","maxHeight","width","minWidth","maxWidth","basicSetup","placeholder","indentWithTab","editable","readOnly","root","initialState"],ul=O.forwardRef((t,e)=>{var{className:n,value:i="",selection:o,extensions:r=[],onChange:s,onStatistics:l,onCreateEditor:a,onUpdate:c,autoFocus:f,theme:h="light",height:u,minHeight:p,maxHeight:x,width:R,minWidth:ne,maxWidth:G,basicSetup:S,placeholder:N,indentWithTab:w,editable:C,readOnly:U,root:H,initialState:Be}=t,v=Wi(t,hl),j=O.useRef(null),{state:ie,view:oe,container:et}=fl({container:j.current,root:H,value:i,autoFocus:f,theme:h,height:u,minHeight:p,maxHeight:x,width:R,minWidth:ne,maxWidth:G,basicSetup:S,placeholder:N,indentWithTab:w,editable:C,readOnly:U,selection:o,onChange:s,onStatistics:l,onCreateEditor:a,onUpdate:c,extensions:r,initialState:Be});if(O.useImperativeHandle(e,()=>({editor:j.current,state:ie,view:oe}),[j,et,ie,oe]),typeof i!="string")throw new Error("value must be typeof string but got "+typeof i);var tt=typeof h=="string"?"cm-theme-"+h:"cm-theme";return Fi("div",Ni({ref:j,className:""+tt+(n?" "+n:"")},v))});ul.displayName="CodeMirror";export{ul as R,As as a,xo as b,Kr as c,gr as d,Lo as e,Cr as h,pl as i,gl as s};
